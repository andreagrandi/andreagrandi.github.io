<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
        <title>Create an EncFS volume compatible with BoxCryptor Classic</title>
        <link rel="stylesheet" href="https://www.andreagrandi.it/theme/css/main.css" />
        <link rel="stylesheet" href="https://www.andreagrandi.it/theme/tipuesearch/css/tipuesearch.css">
        <link href="https://www.andreagrandi.it/feeds/all.rss.xml" type="application/rss+xml" rel="alternate" title="Andrea Grandi RSS Feed" />

        <!--[if IE]>
            <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
        <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
        <link rel="icon" href="/favicon.ico" type="image/x-icon">
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="https://www.andreagrandi.it/">Andrea Grandi </a></h1>
                <nav><ul>
    
                        <li><a href="https://www.andreagrandi.it/about/">About</a></li>
    
                        <li><a href="https://www.andreagrandi.it/curriculum/">Curriculum</a></li>
    
                        <li><a href="https://www.andreagrandi.it/pgp-key/">PGP Key</a></li>
                </ul>
<form id="search" action="https://www.andreagrandi.it/search.html" onsubmit="return validateForm(this.elements['q'].value);">
                        <input type="text" class="search-query" placeholder="" name="q" id="tipue_search_input">
                    </form>
                </nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="https://www.andreagrandi.it/2014/09/12/create-an-encfs-volume-compatible-with-boxcryptor-classic/" rel="bookmark"
           title="Permalink to Create an EncFS volume compatible with BoxCryptor Classic">Create an EncFS volume compatible with BoxCryptor Classic</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <span>Fri 12 September 2014</span>
	        <span>| in <a href="https://www.andreagrandi.it/category/howto-linux-sicurezza.html">HowTo, Linux, Sicurezza</a></span>
<span>| tags: <a href="https://www.andreagrandi.it/tag/boxcryptor.html">boxcryptor</a><a href="https://www.andreagrandi.it/tag/dropbox.html">dropbox</a><a href="https://www.andreagrandi.it/tag/encfs.html">encfs</a></span>
</footer><!-- /.post-info -->      <p>If you are planning to share an encrypted volume between Linux/OSX and
Windows (I will assume you are sharing it on Dropbox, but you could use
any similar service) and you are using
<a href="http://www.arg0.net/encfs"><strong>EncFS</strong></a> under Linux/OSX and
<a href="https://www.boxcryptor.com"><strong>BoxCryptor</strong></a> under Windows, there are
some specifig settings to use when you create the EncFS volume. Infact
even if BoxCryptor claims to be "encfs compatible", it's not 100%.</p>
<p>Suppose you want to create an encrypted volume located at
<strong>\$HOME/.TestTmpEncrypted</strong> and mounted at <strong>\$HOME/TestTmp</strong> you need
the following command:</p>
<div class="highlight"><pre><span></span><span class="c">andrea-Inspiron-660:~ andrea $ encfs ~/.TestTmpEncrypted ~/TestTmp</span>
</pre></div>


<p>answer "Y" when you are asked if you want to create the folders:</p>
<div class="highlight"><pre><span></span><span class="err">The directory &quot;/home/andrea/.TestTmpEncrypted/&quot; does not exist. Should it be created? (y,n) y</span>
<span class="err">The directory &quot;/home/andrea/TestTmp&quot; does not exist. Should it be created? (y,n) y</span>
</pre></div>


<p>At this point you will need to select between default paranoia mode or
advanced mode. Please choose the <strong>advanced</strong> one (x):</p>
<div class="highlight"><pre><span></span><span class="err">Creating new encrypted volume.</span>
<span class="err">Please choose from one of the following options:</span>
<span class="err"> enter &quot;x&quot; for expert configuration mode,</span>
<span class="err"> enter &quot;p&quot; for pre-configured paranoia mode,</span>
<span class="err"> anything else, or an empty line will select standard mode.</span>
<span class="err">?&gt; x</span>
</pre></div>


<p>Manual configuration mode selected.</p>
<div class="highlight"><pre><span></span><span class="k">Select</span> <span class="n">AES</span> <span class="k">as</span> <span class="n">cypher</span> <span class="n">algorithm</span><span class="p">:</span>

<span class="n">The</span> <span class="n">following</span> <span class="n">cypher</span> <span class="n">algorithms</span> <span class="k">are</span> <span class="n">available</span><span class="p">:</span>
<span class="mi">1</span><span class="p">.</span> <span class="n">AES</span> <span class="p">:</span> <span class="mi">16</span> <span class="n">byte</span> <span class="n">block</span> <span class="n">cipher</span>
<span class="c1">-- Supports key lengths of 128 to 256 bits</span>
<span class="c1">-- Supports block sizes of 64 to 4096 bytes</span>
<span class="mi">2</span><span class="p">.</span> <span class="n">Blowfish</span> <span class="p">:</span> <span class="mi">8</span> <span class="n">byte</span> <span class="n">block</span> <span class="n">cypher</span>
<span class="c1">-- Supports key lengths of 128 to 256 bits</span>
<span class="c1">-- Supports block sizes of 64 to 4096 bytes</span>

<span class="n">Enter</span> <span class="n">the</span> <span class="nb">number</span> <span class="n">corresponding</span> <span class="k">to</span> <span class="n">your</span> <span class="n">choice</span><span class="p">:</span> <span class="mi">1</span>

<span class="n">Selected</span> <span class="n">algorithm</span> <span class="ss">&quot;AES&quot;</span>
</pre></div>


<p>Select <strong>256</strong> as key size:</p>
<div class="highlight"><pre><span></span><span class="n">Please</span> <span class="k">select</span> <span class="n">a</span> <span class="k">key</span> <span class="k">size</span> <span class="k">in</span> <span class="n">bits</span><span class="p">.</span> <span class="n">The</span> <span class="n">cypher</span> <span class="n">you</span> <span class="n">have</span> <span class="n">chosen</span>
<span class="n">supports</span> <span class="n">sizes</span> <span class="k">from</span> <span class="mi">128</span> <span class="k">to</span> <span class="mi">256</span> <span class="n">bits</span> <span class="k">in</span> <span class="n">increments</span> <span class="k">of</span> <span class="mi">64</span> <span class="n">bits</span><span class="p">.</span>
<span class="k">For</span> <span class="n">example</span><span class="p">:</span>
<span class="mi">128</span><span class="p">,</span> <span class="mi">192</span><span class="p">,</span> <span class="mi">256</span>
<span class="n">Selected</span> <span class="k">key</span> <span class="k">size</span><span class="p">:</span> <span class="mi">256</span>

<span class="k">Using</span> <span class="k">key</span> <span class="k">size</span> <span class="k">of</span> <span class="mi">256</span> <span class="n">bits</span>
</pre></div>


<p>Choose <strong>1024</strong> as block size:</p>
<div class="highlight"><pre><span></span><span class="k">Select</span> <span class="n">a</span> <span class="n">block</span> <span class="k">size</span> <span class="k">in</span> <span class="n">bytes</span><span class="p">.</span> <span class="n">The</span> <span class="n">cypher</span> <span class="n">you</span> <span class="n">have</span> <span class="n">chosen</span>
<span class="n">supports</span> <span class="n">sizes</span> <span class="k">from</span> <span class="mi">64</span> <span class="k">to</span> <span class="mi">4096</span> <span class="n">bytes</span> <span class="k">in</span> <span class="n">increments</span> <span class="k">of</span> <span class="mi">16</span><span class="p">.</span>
<span class="n">Alternatively</span><span class="p">,</span> <span class="n">just</span> <span class="n">press</span> <span class="n">enter</span> <span class="k">for</span> <span class="n">the</span> <span class="k">default</span> <span class="p">(</span><span class="mi">1024</span> <span class="n">bytes</span><span class="p">)</span>

<span class="n">filesystem</span> <span class="n">block</span> <span class="k">size</span><span class="p">:</span>

<span class="k">Using</span> <span class="n">filesystem</span> <span class="n">block</span> <span class="k">size</span> <span class="k">of</span> <span class="mi">1024</span> <span class="n">bytes</span>
</pre></div>


<p>Select <strong>Stream</strong> as filename encoding:</p>
<div class="highlight"><pre><span></span><span class="n">The</span> <span class="n">following</span> <span class="n">filename</span> <span class="k">encoding</span> <span class="n">algorithms</span> <span class="k">are</span> <span class="n">available</span><span class="p">:</span>
<span class="mi">1</span><span class="p">.</span> <span class="n">Block</span> <span class="p">:</span> <span class="n">Block</span> <span class="k">encoding</span><span class="p">,</span> <span class="n">hides</span> <span class="n">file</span> <span class="n">name</span> <span class="k">size</span> <span class="n">somewhat</span>
<span class="mi">2</span><span class="p">.</span> <span class="k">Null</span> <span class="p">:</span> <span class="k">No</span> <span class="n">encryption</span> <span class="k">of</span> <span class="n">filenames</span>
<span class="mi">3</span><span class="p">.</span> <span class="n">Stream</span> <span class="p">:</span> <span class="n">Stream</span> <span class="k">encoding</span><span class="p">,</span> <span class="n">keeps</span> <span class="n">filenames</span> <span class="k">as</span> <span class="n">short</span> <span class="k">as</span> <span class="n">possible</span>

<span class="n">Enter</span> <span class="n">the</span> <span class="nb">number</span> <span class="n">corresponding</span> <span class="k">to</span> <span class="n">your</span> <span class="n">choice</span><span class="p">:</span> <span class="mi">3</span>

<span class="n">Selected</span> <span class="n">algorithm</span> <span class="ss">&quot;Stream&quot;</span><span class="err">&quot;</span>
</pre></div>


<p>Do <strong>NOT</strong> enable <strong>filename initialization vector chaining</strong>:</p>
<div class="highlight"><pre><span></span><span class="err">Enable filename initialization vector chaining?</span>
<span class="err">This makes filename encoding dependent on the complete path,</span>
<span class="err">rather then encoding each path element individually.</span>
<span class="err">The default here is Yes.</span>
<span class="err">Any response that does not begin with &#39;n&#39; will mean Yes: no</span>
</pre></div>


<p>Do <strong>NOT</strong> enable <strong>per-file initialization vectors</strong>:</p>
<div class="highlight"><pre><span></span><span class="err">Enable per-file initialization vectors?</span>
<span class="err">This adds about 8 bytes per file to the storage requirements.</span>
<span class="err">It should not affect performance except possibly with applications</span>
<span class="err">which rely on block-aligned file io for performance.</span>
<span class="err">The default here is Yes.</span>
<span class="err">Any response that does not begin with &#39;n&#39; will mean Yes: no</span>
</pre></div>


<p>Do <strong>NOT</strong> enable <strong>external chained IV</strong>:</p>
<div class="highlight"><pre><span></span><span class="k">External</span><span class="w"> </span><span class="n">chained</span><span class="w"> </span><span class="n">IV</span><span class="w"> </span><span class="n">disabled</span><span class="p">,</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="k">both</span><span class="w"> </span><span class="s1">&#39;IV chaining&#39;</span><span class="w"></span>
<span class="ow">and</span><span class="w"> </span><span class="s1">&#39;unique IV&#39;</span><span class="w"> </span><span class="n">features</span><span class="w"> </span><span class="k">are</span><span class="w"> </span><span class="n">required</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="k">option</span><span class="p">.</span><span class="w"></span>
<span class="n">Enable</span><span class="w"> </span><span class="n">block</span><span class="w"> </span><span class="n">authentication</span><span class="w"> </span><span class="n">code</span><span class="w"> </span><span class="n">headers</span><span class="w"></span>
<span class="k">on</span><span class="w"> </span><span class="k">every</span><span class="w"> </span><span class="n">block</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="k">file</span><span class="vm">?</span><span class="w"> </span><span class="n">This</span><span class="w"> </span><span class="n">adds</span><span class="w"> </span><span class="n">about</span><span class="w"> </span><span class="mi">12</span><span class="w"> </span><span class="n">bytes</span><span class="w"> </span><span class="n">per</span><span class="w"> </span><span class="n">block</span><span class="w"></span>
<span class="k">to</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">storage</span><span class="w"> </span><span class="n">requirements</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="k">file</span><span class="p">,</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">significantly</span><span class="w"> </span><span class="n">affects</span><span class="w"></span>
<span class="n">performance</span><span class="w"> </span><span class="n">but</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="n">also</span><span class="w"> </span><span class="n">means</span><span class="w"> </span><span class="o">[</span><span class="n">almost</span><span class="o">]</span><span class="w"> </span><span class="ow">any</span><span class="w"> </span><span class="n">modifications</span><span class="w"> </span><span class="ow">or</span><span class="w"> </span><span class="n">errors</span><span class="w"></span>
<span class="k">within</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">block</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">be</span><span class="w"> </span><span class="n">caught</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">cause</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="k">read</span><span class="w"> </span><span class="n">error</span><span class="p">.</span><span class="w"></span>
<span class="n">The</span><span class="w"> </span><span class="k">default</span><span class="w"> </span><span class="n">here</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">No</span><span class="p">.</span><span class="w"></span>
<span class="ow">Any</span><span class="w"> </span><span class="n">response</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">does</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="k">begin</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="s1">&#39;y&#39;</span><span class="w"> </span><span class="n">will</span><span class="w"> </span><span class="n">mean</span><span class="w"> </span><span class="k">No</span><span class="err">:</span><span class="w"> </span><span class="k">no</span><span class="w"></span>
</pre></div>


<p>Do <strong>NOT</strong> enable <strong>random bytes to each block header</strong>:</p>
<div class="highlight"><pre><span></span><span class="err">Add random bytes to each block header?</span>
<span class="err">This adds a performance penalty, but ensures that blocks</span>
<span class="err">have different authentication codes. Note that you can</span>
<span class="err">have the same benefits by enabling per-file initialisation</span>
<span class="err">vectors, which does not come with as great a performance</span>
<span class="err">penalty.</span>
<span class="err">Select a number of bytes, from 0 (no random bytes) to 8: 0</span>
</pre></div>


<p>Enable <strong>file-hole pass-through</strong>:</p>
<div class="highlight"><pre><span></span><span class="err">Enable file-hole pass-through?</span>
<span class="err">This avoids writing encrypted blocks when file holes are created.</span>
<span class="err">The default here is Yes.</span>
<span class="err">Any response that does not begin with &#39;n&#39; will mean Yes: yes</span>
</pre></div>


<p>Finally you will see:</p>
<div class="highlight"><pre><span></span><span class="err">Configuration finished. The filesystem to be created has</span>
<span class="err">the following properties:</span>
<span class="err">Filesystem cypher: &quot;ssl/aes&quot;, version 3:0:2</span>
<span class="err">Filename encoding: &quot;nameio/stream&quot;, version 2:1:2</span>
<span class="err">Key Size: 256 bits</span>
<span class="err">Block Size: 1024 bytes</span>
<span class="err">File holes passed through to ciphertext.</span>
</pre></div>


<p>At this point set a passphrase for your new volume:</p>
<div class="highlight"><pre><span></span><span class="n">Now</span> <span class="n">you</span> <span class="n">will</span> <span class="n">need</span> <span class="k">to</span> <span class="n">enter</span> <span class="n">a</span> <span class="n">password</span> <span class="k">for</span> <span class="n">your</span> <span class="n">filesystem</span><span class="p">.</span>
<span class="n">You</span> <span class="n">will</span> <span class="n">need</span> <span class="k">to</span> <span class="n">remember</span> <span class="n">this</span> <span class="n">password</span><span class="p">,</span> <span class="k">as</span> <span class="n">there</span> <span class="k">is</span> <span class="n">absolutely</span>
<span class="k">no</span> <span class="n">recovery</span> <span class="n">mechanism</span><span class="p">.</span> <span class="n">However</span><span class="p">,</span> <span class="n">the</span> <span class="n">password</span> <span class="n">can</span> <span class="n">be</span> <span class="n">changed</span>
<span class="n">later</span> <span class="k">using</span> <span class="n">encfsctl</span><span class="p">.</span>

<span class="k">New</span> <span class="n">Encfs</span> <span class="n">Password</span><span class="p">:</span>
<span class="n">Verify</span> <span class="n">Encfs</span> <span class="n">Password</span><span class="p">:</span>
</pre></div>


<p>You should be able to mount this volume using BoxCryptor.</p>
    </div><!-- /.entry-content -->
    <div class="comments">
      <h2>Comments !</h2>
      <div id="disqus_thread"></div>
      <script type="text/javascript">
        var disqus_identifier = "2014/09/12/create-an-encfs-volume-compatible-with-boxcryptor-classic/";
        var disqus_url = "https://www.andreagrandi.it/2014/09/12/create-an-encfs-volume-compatible-with-boxcryptor-classic/";
        (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//andrea-grandi-it.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
      </script>
    </div>

  </article>
</section>
        <section id="extras" class="body">
                <div class="social">
                        <h2>social</h2>
                        <ul>
                            <li><a href="https://www.andreagrandi.it/feeds/all.rss.xml" type="application/rss+xml" rel="alternate">rss feed</a></li>

                            <li><a href="https://twitter.com/andreagrandi">twitter</a></li>
                            <li><a href="https://github.com/andreagrandi">github</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <p>
                    Powered by <a href="http://getpelican.com/">Pelican</a> and Python -
                    Source code available on <a href="https://github.com/andreagrandi/andreagrandi.it">GitHub</a>
                    <a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/">
                        <img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc/4.0/80x15.png" />
                    </a>
                </p>
        </footer><!-- /#contentinfo -->

    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-2140684-3']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>
<script type="text/javascript">
    var disqus_shortname = 'andrea-grandi-it';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
</body>
</html>