
<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="IE=edge" http-equiv="X-UA-Compatible"/>
<meta content="True" name="HandheldFriendly"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="" name="robots"/>
<link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,400;0,700;1,400&amp;family=Source+Sans+Pro:ital,wght@0,300;0,400;0,700;1,400&amp;display=swap" rel="stylesheet"/>
<link href="https://www.andreagrandi.it/theme/stylesheet/style.min.css" rel="stylesheet" type="text/css"/>
<link href="https://www.andreagrandi.it/theme/pygments/monokai.min.css" id="pygments-light-theme" rel="stylesheet" type="text/css"/>
<script src="https://www.andreagrandi.it/theme/tipuesearch/jquery.min.js"></script>
<script defer="" src="https://www.andreagrandi.it/theme/tipuesearch/tipuesearch.min.js"></script>
<script defer="" src="https://www.andreagrandi.it/theme/tipuesearch/tipuesearch_set.js"></script>
<script defer="" src="https://www.andreagrandi.it/tipuesearch_content.js"></script>
<link href="https://www.andreagrandi.it/theme/tipuesearch/tipuesearch.min.css" rel="stylesheet">
<link href="https://www.andreagrandi.it/theme/font-awesome/css/fontawesome.css" rel="stylesheet" type="text/css"/>
<link href="https://www.andreagrandi.it/theme/font-awesome/css/brands.css" rel="stylesheet" type="text/css"/>
<link href="https://www.andreagrandi.it/theme/font-awesome/css/solid.css" rel="stylesheet" type="text/css"/>
<link href="https://www.andreagrandi.it/feeds/all.rss.xml" rel="alternate" title="Andrea Grandi RSS" type="application/rss+xml"/>
<!-- Chrome, Firefox OS and Opera -->
<meta content="#333333" name="theme-color"/>
<!-- Windows Phone -->
<meta content="#333333" name="msapplication-navbutton-color"/>
<!-- iOS Safari -->
<meta content="yes" name="apple-mobile-web-app-capable"/>
<meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"/>
<!-- Microsoft EDGE -->
<meta content="#333333" name="msapplication-TileColor"/>
<meta content="Andrea Grandi" name="author">
<meta content="This tutorial explains how to call a method written in Go and compiled to WebAssembly (WASM) from JavaScript by using TinyGo" name="description">
<meta content="go, golang, tinygo, web, webassembly, wasm, assembly, js, javascript, html, browser, macos, code, development, embedded, programming, language" name="keywords"/>
<meta content="Andrea Grandi" property="og:site_name">
<meta content="Getting started with TinyGo and WebAssembly (WASM)" property="og:title">
<meta content="This tutorial explains how to call a method written in Go and compiled to WebAssembly (WASM) from JavaScript by using TinyGo" property="og:description">
<meta content="en_US" property="og:locale">
<meta content="https://www.andreagrandi.it/2020/10/23/getting-started-with-tinygo-webassembly/" property="og:url"/>
<meta content="article" property="og:type"/>
<meta content="2020-10-23 18:00:00+02:00" property="article:published_time"/>
<meta content="" property="article:modified_time"/>
<meta content="https://www.andreagrandi.it/author/andrea-grandi.html" property="article:author"/>
<meta content="Development" property="article:section">
<meta content="go" property="article:tag"/>
<meta content="golang" property="article:tag"/>
<meta content="tinygo" property="article:tag"/>
<meta content="web" property="article:tag"/>
<meta content="webassembly" property="article:tag"/>
<meta content="wasm" property="article:tag"/>
<meta content="assembly" property="article:tag"/>
<meta content="js" property="article:tag"/>
<meta content="javascript" property="article:tag"/>
<meta content="html" property="article:tag"/>
<meta content="browser" property="article:tag"/>
<meta content="macos" property="article:tag"/>
<meta content="code" property="article:tag"/>
<meta content="development" property="article:tag"/>
<meta content="embedded" property="article:tag"/>
<meta content="programming" property="article:tag"/>
<meta content="language" property="article:tag"/>
<meta content="/images/me_pycon_2019_2_300x300.jpg" property="og:image"/>
<title>Andrea Grandi – Getting started with TinyGo and WebAssembly (WASM)</title>
<link href="https://www.andreagrandi.it/2020/10/23/getting-started-with-tinygo-webassembly/" rel="canonical">
<link href="https://mastodon.social/@andreagrandi" rel="me">
</link></link></meta></meta></meta></meta></meta></meta></meta></link><link href="https://www.andreagrandi.it/2020/10/23/getting-started-with-tinygo-webassembly/" rel="canonical"/><script type="application/ld+json">{"@context": "https://schema.org", "@type": "BreadcrumbList", "itemListElement": [{"@type": "ListItem", "position": 1, "name": "Andrea Grandi", "item": "https://www.andreagrandi.it"}, {"@type": "ListItem", "position": 2, "name": "2020", "item": "https://www.andreagrandi.it/2020"}, {"@type": "ListItem", "position": 3, "name": "10", "item": "https://www.andreagrandi.it/2020/10"}, {"@type": "ListItem", "position": 4, "name": "23", "item": "https://www.andreagrandi.it/2020/10/23"}, {"@type": "ListItem", "position": 5, "name": "Getting started with tinygo webassembly", "item": "https://www.andreagrandi.it/2020/10/23/getting-started-with-tinygo-webassembly"}, {"@type": "ListItem", "position": 6, "name": "Index", "item": "https://www.andreagrandi.it/2020/10/23/getting-started-with-tinygo-webassembly/index.html"}]}</script><script type="application/ld+json">{"@context": "https://schema.org", "@type": "Article", "author": {"@type": "Person", "name": "Andrea Grandi"}, "publisher": {"@type": "Organization", "name": "Andrea Grandi"}, "headline": "Getting started with TinyGo and WebAssembly (WASM)", "about": "Development", "datePublished": "2020-10-23 18:00"}</script></head>
<body class="light-theme">
<aside>
<div>
<a href="https://www.andreagrandi.it">
<img alt="Andrea Grandi" src="/images/me_pycon_2019_2_300x300.jpg" title="Andrea Grandi"/>
</a>
<h1>
<a href="https://www.andreagrandi.it">Andrea Grandi</a>
</h1>
<p>Software Developer</p>
<form action="/search.html" class="navbar-search" role="search">
<input id="tipue_search_input" name="q" placeholder="Search..." type="text"/>
</form>
<nav>
<ul class="list">
<li>
<a href="https://www.andreagrandi.it/about/" target="_self">
              About
            </a>
</li>
<li>
<a href="https://www.andreagrandi.it/curriculum/" target="_self">
              Curriculum
            </a>
</li>
<li>
<a href="https://www.andreagrandi.it/pgp-key/" target="_self">
              PGP Key
            </a>
</li>
</ul>
</nav>
<ul class="social">
<li>
<a class="sc-mastodon" href="https://mastodon.social/@andreagrandi" rel="me" target="_blank">
<i class="fab fa-mastodon"></i>
</a>
</li>
<li>
<a class="sc-github" href="https://github.com/andreagrandi" target="_blank">
<i class="fab fa-github"></i>
</a>
</li>
<li>
<a class="sc-linkedin" href="https://www.linkedin.com/in/andreagrandi/" target="_blank">
<i class="fab fa-linkedin"></i>
</a>
</li>
</ul>
</div>
<a href="https://tree-nation.com/profile/impact/andreagrandi#co2" style="position:relative;cursor:pointer;display:block;z-index:999;" target="_blank">
<img src="https://tree-nation.com/images/tracking/label-co2-website-white-en.png" style="width:157px;height:auto;"/>
</a>
<script src="https://tree-nation.com/js/track.js"></script>
<script>treenation_track("63a8beb06e6e6");</script>
</aside>
<main>
<nav>
<a href="https://www.andreagrandi.it">Home</a>
<a href="/archives.html">Archives</a>
<a href="/categories.html">Categories</a>
<a href="/tags.html">Tags</a>
<a href="https://www.andreagrandi.it/feeds/all.rss.xml">RSS</a>
</nav>
<article class="single">
<header>
<h1 id="getting-started-with-tinygo-webassembly">Getting started with TinyGo and WebAssembly (WASM)</h1>
<p>
      Posted on Fri 23 October 2020 in <a href="https://www.andreagrandi.it/category/development.html">Development</a>
</p>
</header>
<div>
<p><a href=""><img alt="tinygo logo" src="https://www.andreagrandi.it/images/2020/10/tinygo-logo.png" width="30%"/></a></p>
<p>With <a href="https://webassembly.org">WebAssembly</a> we can write a library in almost any language, compile it to <strong>WebAssembly (WASM)</strong> and use it from <strong>JavaScript</strong>.</p>
<p>In this tutorial I will show you how to get started with <a href="https://tinygo.org">TinyGo</a> by writing a simple <code>add()</code> method in <strong>Go</strong> and using it from a web page. All the code will be running <strong>in the browser</strong> without any backend process involved (you only need a static server to serve the html page and JavaScript files, but I will cover this part too).</p>
<h2>Install TinyGo</h2>
<p>To be able to install <a href="https://tinygo.org">TinyGo</a> you need to have <a href="https://golang.org">Go</a> installed first. I have personally tested this on my Mac, so I will provide instructions for MacOS, but you can find instructions for the other operating systems directly on the project website: <a href="https://tinygo.org/getting-started">https://tinygo.org/getting-started</a></p>
<p>You can install TinyGo on MacOS using <strong>brew</strong>:</p>
<div class="highlight"><pre><span></span><code>brew<span class="w"> </span>tap<span class="w"> </span>tinygo-org/tools
brew<span class="w"> </span>install<span class="w"> </span>tinygo
</code></pre></div>
<p>If installation is successful, you should be able to run this:</p>
<div class="highlight"><pre><span></span><code>tinygo<span class="w"> </span>version
tinygo<span class="w"> </span>version<span class="w"> </span><span class="m">0</span>.15.0<span class="w"> </span>darwin/amd64<span class="w"> </span><span class="o">(</span>using<span class="w"> </span>go<span class="w"> </span>version<span class="w"> </span>go1.15.3<span class="w"> </span>and<span class="w"> </span>LLVM<span class="w"> </span>version<span class="w"> </span><span class="m">10</span>.0.1<span class="o">)</span>
</code></pre></div>
<h2>Implement an add() method in Go</h2>
<p>Create a new empty project/repository using your favourite IDE (I personally used <strong>VSCode</strong>, but of course you can use anything else) and then create <code>main.go</code> file with this code:</p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="p">}</span>

<span class="c1">// This function is exported to JavaScript, so can be called using</span>
<span class="c1">// exports.add() in JavaScript.</span>
<span class="c1">//export add</span>
<span class="kd">func</span><span class="w"> </span><span class="nx">add</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span><span class="w"> </span><span class="nx">y</span><span class="w"> </span><span class="kt">int</span><span class="p">)</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nx">x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">y</span>
<span class="p">}</span>
</code></pre></div>
<h2>Compile to WebAssembly (WASM)</h2>
<p>To compile the above code to <strong>WebAssembly</strong> you need to run this command:</p>
<div class="highlight"><pre><span></span><code>tinygo<span class="w"> </span>build<span class="w"> </span>-o<span class="w"> </span>wasm.wasm<span class="w"> </span>-target<span class="w"> </span>wasm<span class="w"> </span>./main.go
</code></pre></div>
<p>that will create a file named <code>wasm.wasm</code> in the same directory of your project. This is the compiled web binary that will be loaded later by JavaScript.</p>
<h2>Add required WASM library</h2>
<p>There is a file that is provided with TinyGo that you need to distribute with your application: <code>wasm_exec.js</code>. To include it in your project, you need to run this:</p>
<div class="highlight"><pre><span></span><code>cp<span class="w"> </span><span class="k">$(</span>tinygo<span class="w"> </span>env<span class="w"> </span>TINYGOROOT<span class="k">)</span>/targets/wasm_exec.js<span class="w"> </span>.
</code></pre></div>
<h2>Script to load the WebAssembly</h2>
<p>At this point you will need an additional JavaScript file that will take care of loading the WebAssembly code. This file is not "standard" and may be different for every project, but the essential commands will be very similar.</p>
<p>Create a new file named <code>wasm.js</code> with this code and save it in the root of your project along with the other files:</p>
<div class="highlight"><pre><span></span><code><span class="s1">'use strict'</span><span class="p">;</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">WASM_URL</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">'wasm.wasm'</span><span class="p">;</span>
<span class="kd">var</span><span class="w"> </span><span class="nx">wasm</span><span class="p">;</span>

<span class="kd">function</span><span class="w"> </span><span class="nx">init</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">const</span><span class="w"> </span><span class="nx">go</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">Go</span><span class="p">();</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="s1">'instantiateStreaming'</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="nx">WebAssembly</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">WebAssembly</span><span class="p">.</span><span class="nx">instantiateStreaming</span><span class="p">(</span><span class="nx">fetch</span><span class="p">(</span><span class="nx">WASM_URL</span><span class="p">),</span><span class="w"> </span><span class="nx">go</span><span class="p">.</span><span class="nx">importObject</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="w"> </span><span class="p">(</span><span class="nx">obj</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">wasm</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">obj</span><span class="p">.</span><span class="nx">instance</span><span class="p">;</span>
<span class="w">            </span><span class="nx">go</span><span class="p">.</span><span class="nx">run</span><span class="p">(</span><span class="nx">wasm</span><span class="p">);</span>
<span class="w">        </span><span class="p">})</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="nx">init</span><span class="p">();</span>
</code></pre></div>
<h2>HTML page to collect input and show result</h2>
<p>We create a simple HTML page that will display two input boxes and a third one to show the result. Create a new file named <code>index.html</code> in the root of your project:</p>
<div class="highlight"><pre><span></span><code><span class="cp">&lt;!DOCTYPE html&gt;</span>

<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">charset</span><span class="o">=</span><span class="s">"utf-8"</span> <span class="p">/&gt;</span>
    <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>Go WebAssembly<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">name</span><span class="o">=</span><span class="s">"viewport"</span> <span class="na">content</span><span class="o">=</span><span class="s">"width=device-width, initial-scale=1"</span> <span class="p">/&gt;</span>
    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">"wasm_exec.js"</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">"wasm.js"</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span>WebAssembly<span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Add two numbers, using WebAssembly calling an add() method written in Go:<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"number"</span> <span class="na">id</span><span class="o">=</span><span class="s">"a"</span> <span class="na">value</span><span class="o">=</span><span class="s">"2"</span> <span class="p">/&gt;</span> + <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"number"</span> <span class="na">id</span><span class="o">=</span><span class="s">"b"</span> <span class="na">value</span><span class="o">=</span><span class="s">"2"</span> <span class="p">/&gt;</span> = <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">"number"</span> <span class="na">id</span><span class="o">=</span><span class="s">"result"</span><span class="p">/&gt;</span>
    <span class="p">&lt;</span><span class="nt">button</span><span class="p">&gt;</span>Calculate<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="w">        </span><span class="kd">const</span><span class="w"> </span><span class="nx">button</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">'button'</span><span class="p">);</span>

<span class="w">        </span><span class="nx">button</span><span class="p">.</span><span class="nx">addEventListener</span><span class="p">(</span><span class="s1">'click'</span><span class="p">,</span><span class="w"> </span><span class="nx">event</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="kd">var</span><span class="w"> </span><span class="nx">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">parseInt</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">"a"</span><span class="p">).</span><span class="nx">value</span><span class="p">);</span>
<span class="w">            </span><span class="kd">var</span><span class="w"> </span><span class="nx">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">parseInt</span><span class="p">(</span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">"b"</span><span class="p">).</span><span class="nx">value</span><span class="p">);</span>
<span class="w">            </span><span class="kd">var</span><span class="w"> </span><span class="nx">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">wasm</span><span class="p">.</span><span class="nx">exports</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span><span class="w"> </span><span class="nx">b</span><span class="p">);</span>
<span class="w">            </span><span class="kd">var</span><span class="w"> </span><span class="nx">sum_box</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">"result"</span><span class="p">);</span>
<span class="w">            </span><span class="nx">sum_box</span><span class="p">.</span><span class="nx">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nx">res</span><span class="p">;</span>
<span class="w">        </span><span class="p">});</span>
<span class="w">    </span><span class="p">&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>

<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</code></pre></div>
<p><strong>Please note:</strong> frontend development is really not my daily bread. I'm sure the above code can be written in a better way, but I can assure you that at least it works.</p>
<h2>Serving the static files</h2>
<p>The project itself would be complete, but you need something able to serve static pages and set a couple of required headers. We can implement one with a few lines of Go. Create a new file named <code>server.go</code>:</p>
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nx">main</span>

<span class="kn">import</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="s">"log"</span>
<span class="w">    </span><span class="s">"net/http"</span>
<span class="w">    </span><span class="s">"strings"</span>
<span class="p">)</span>

<span class="kd">const</span><span class="w"> </span><span class="nx">dir</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">"./"</span>

<span class="kd">func</span><span class="w"> </span><span class="nx">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">fs</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">http</span><span class="p">.</span><span class="nx">FileServer</span><span class="p">(</span><span class="nx">http</span><span class="p">.</span><span class="nx">Dir</span><span class="p">(</span><span class="nx">dir</span><span class="p">))</span>
<span class="w">    </span><span class="nx">log</span><span class="p">.</span><span class="nx">Print</span><span class="p">(</span><span class="s">"Serving "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nx">dir</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">" on http://localhost:8080"</span><span class="p">)</span>
<span class="w">    </span><span class="nx">http</span><span class="p">.</span><span class="nx">ListenAndServe</span><span class="p">(</span><span class="s">":8080"</span><span class="p">,</span><span class="w"> </span><span class="nx">http</span><span class="p">.</span><span class="nx">HandlerFunc</span><span class="p">(</span><span class="kd">func</span><span class="p">(</span><span class="nx">resp</span><span class="w"> </span><span class="nx">http</span><span class="p">.</span><span class="nx">ResponseWriter</span><span class="p">,</span><span class="w"> </span><span class="nx">req</span><span class="w"> </span><span class="o">*</span><span class="nx">http</span><span class="p">.</span><span class="nx">Request</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nx">resp</span><span class="p">.</span><span class="nx">Header</span><span class="p">().</span><span class="nx">Add</span><span class="p">(</span><span class="s">"Cache-Control"</span><span class="p">,</span><span class="w"> </span><span class="s">"no-cache"</span><span class="p">)</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="nx">strings</span><span class="p">.</span><span class="nx">HasSuffix</span><span class="p">(</span><span class="nx">req</span><span class="p">.</span><span class="nx">URL</span><span class="p">.</span><span class="nx">Path</span><span class="p">,</span><span class="w"> </span><span class="s">".wasm"</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nx">resp</span><span class="p">.</span><span class="nx">Header</span><span class="p">().</span><span class="nx">Set</span><span class="p">(</span><span class="s">"content-type"</span><span class="p">,</span><span class="w"> </span><span class="s">"application/wasm"</span><span class="p">)</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="nx">fs</span><span class="p">.</span><span class="nx">ServeHTTP</span><span class="p">(</span><span class="nx">resp</span><span class="p">,</span><span class="w"> </span><span class="nx">req</span><span class="p">)</span>
<span class="w">    </span><span class="p">}))</span>
<span class="p">}</span>
</code></pre></div>
<h2>Testing the project</h2>
<p>The project is now complete and can be tested. There are at least two methods to check if everything works: <strong>using the webpage</strong> we just created and <strong>calling the method from the JavaScript console</strong>.</p>
<p>To test the application using the web page, run the server from the command line:</p>
<div class="highlight"><pre><span></span><code>go<span class="w"> </span>run<span class="w"> </span>server.go
</code></pre></div>
<p>Open a <strong>web browser</strong> and visit the address <a href="http://localhost:8080">http://localhost:8080</a></p>
<p>You should see something like this:</p>
<p><a href=""><img alt="web assembly browser" src="https://www.andreagrandi.it/images/2020/10/tinygo_web_assembly_browser.png" width="60%"/></a></p>
<p>Once the page is loaded you can also open the <strong>JavaScript console</strong> (it's in you browser developers tools and at least Chrome and Firefox have one) and call the method directly:</p>
<p><a href=""><img alt="web assembly js console" src="https://www.andreagrandi.it/images/2020/10/tinygo_web_assembly_js_console.png" width="60%"/></a></p>
<h2>Conclusion</h2>
<p>If you want to learn more about <strong>TinyGo</strong> I suggest you to visit the project website <a href="https://tinygo.org">https://tinygo.org</a> while more technical information and details about <strong>WebAssembly</strong> can be found here <a href="https://webassembly.org">https://webassembly.org</a></p>
<p>You can find the <strong>complete source code</strong> of this project on <strong>GitHub</strong>: <a href="https://github.com/andreagrandi/tinygo-adder">https://github.com/andreagrandi/tinygo-adder</a></p>
<h2>Credits</h2>
<p>I want to thank my colleague <a href="https://twitter.com/rossjones">Ross Jones</a> for introducing me to WASM and for the help given.</p>
<h2>References</h2>
<ul>
<li><a href="https://tinygo.org/webassembly">https://tinygo.org/webassembly</a></li>
<li><a href="https://webassembly.org/">https://webassembly.org/</a></li>
</ul>
</div>
<div class="tag-cloud">
<p>
<a href="https://www.andreagrandi.it/tag/go.html">go</a>
<a href="https://www.andreagrandi.it/tag/golang.html">golang</a>
<a href="https://www.andreagrandi.it/tag/tinygo.html">tinygo</a>
<a href="https://www.andreagrandi.it/tag/web.html">web</a>
<a href="https://www.andreagrandi.it/tag/webassembly.html">webassembly</a>
<a href="https://www.andreagrandi.it/tag/wasm.html">wasm</a>
<a href="https://www.andreagrandi.it/tag/assembly.html">assembly</a>
<a href="https://www.andreagrandi.it/tag/js.html">js</a>
<a href="https://www.andreagrandi.it/tag/javascript.html">javascript</a>
<a href="https://www.andreagrandi.it/tag/html.html">html</a>
<a href="https://www.andreagrandi.it/tag/browser.html">browser</a>
<a href="https://www.andreagrandi.it/tag/macos.html">macos</a>
<a href="https://www.andreagrandi.it/tag/code.html">code</a>
<a href="https://www.andreagrandi.it/tag/development.html">development</a>
<a href="https://www.andreagrandi.it/tag/embedded.html">embedded</a>
<a href="https://www.andreagrandi.it/tag/programming.html">programming</a>
<a href="https://www.andreagrandi.it/tag/language.html">language</a>
</p>
</div>
<!-- Disqus -->
<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'andrea-grandi-it';
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>
    Please enable JavaScript to view comments.
</noscript>
<!-- End Disqus -->
</article>
<footer>
<p>
  © 2024  - This work is licensed under a <a href="http://creativecommons.org/licenses/by-sa/4.0/" rel="license">Creative Commons Attribution-ShareAlike 4.0 International License</a>
</p>
<p>
  Built with <a href="http://getpelican.com" target="_blank">Pelican</a> using <a href="http://bit.ly/flex-pelican" target="_blank">Flex</a> theme - source code available on <a href="https://github.com/andreagrandi/andreagrandi.it" target="_blank">GitHub</a>
</p><p>
<a href="http://creativecommons.org/licenses/by-sa/4.0/" rel="license" target="_blank">
<img alt="Creative Commons License" height="15" src="/images/by-sa.png" style="border-width:0" title="Creative Commons License" width="80">
</img></a>
</p> </footer>
</main>
<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " Andrea Grandi ",
  "url" : "https://www.andreagrandi.it",
  "image": "/images/me_pycon_2019_2_300x300.jpg",
  "description": ""
}
</script>
<script>
    $(document).ready(function () {
      $('#tipue_search_input').tipuesearch();
    });
  </script>
</body>
</html>