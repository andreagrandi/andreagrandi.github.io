
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="robots" content="" />

  <link
    href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,400;0,700;1,400&family=Source+Sans+Pro:ital,wght@0,300;0,400;0,700;1,400&display=swap"
    rel="stylesheet">

  <link rel="stylesheet" type="text/css" href="https://www.andreagrandi.it/theme/stylesheet/style.min.css">


  <link id="pygments-light-theme" rel="stylesheet" type="text/css"     href="https://www.andreagrandi.it/theme/pygments/monokai.min.css">

  <script src="https://www.andreagrandi.it/theme/tipuesearch/jquery.min.js"></script>
  <script defer src="https://www.andreagrandi.it/theme/tipuesearch/tipuesearch.min.js"></script>
  <script defer src="https://www.andreagrandi.it/theme/tipuesearch/tipuesearch_set.js"></script>
  <script defer src="https://www.andreagrandi.it/tipuesearch_content.js"></script>
  <link rel="stylesheet" href="https://www.andreagrandi.it/theme/tipuesearch/tipuesearch.min.css" />

  <link rel="stylesheet" type="text/css" href="https://www.andreagrandi.it/theme/font-awesome/css/fontawesome.css">
  <link rel="stylesheet" type="text/css" href="https://www.andreagrandi.it/theme/font-awesome/css/brands.css">
  <link rel="stylesheet" type="text/css" href="https://www.andreagrandi.it/theme/font-awesome/css/solid.css">



  <link href="https://www.andreagrandi.it/feeds/all.rss.xml" type="application/rss+xml" rel="alternate"
    title="Andrea Grandi RSS">


  <!-- Chrome, Firefox OS and Opera -->
  <meta name="theme-color" content="#333333">
  <!-- Windows Phone -->
  <meta name="msapplication-navbutton-color" content="#333333">
  <!-- iOS Safari -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <!-- Microsoft EDGE -->
  <meta name="msapplication-TileColor" content="#333333">

<meta name="author" content="Andrea Grandi" />
<meta name="description" content="PyPI is the Python Package Index, that archive that let you install a package using pip, for example: pip install Flask In the past days I started writing a Python API client for Toshl expense manager and I decided to publish the library on PyPI. You can have a look at my library here https://github.com/andreagrandi/toshl-python (please note: it&#39;s still in development and Toshl API is not even public yet) in case you are not sure how to structure it. I found a nice guide but it wasn&#39;t complete (for example it didn&#39;t say how to sign packages) so I decided to rewrite it adding more information. Create PyPI accounts To publish packages on PyPI you need to create two accounts: one for the production server and another one for the test server. When you register, please specify (if you have one, but I really hope you do) the PGP id of your public key. Once the accounts are created, you need to create a file named .pypirc in your \$HOME folder containing the following configuration: [distutils] index-servers = pypi pypitest [pypi] repository=https://pypi.python.org/pypi username=your_username password=your_password [pypitest] repository=https://testpypi.python.org/pypi username=your_username password=your_password Please substitute your_username and your_password with the details you sent during the registration. Preparing the package I assume you have structured your library in the proper way and have included a setup.py with all the configuration (it&#39;s not something specific to PyPI so you should have done it already). If you haven&#39;t I remember you can give a look at my library here https://github.com/andreagrandi/toshl-python in particular to the setup.py: from setuptools import setup, find_packages setup( name=&#39;toshl&#39;, version=&#39;0.0.3&#39;, url=&#39;https://github.com/andreagrandi/toshl-python&#39;, download_url=&#39;https://github.com/andreagrandi/toshl-python/tarball/0.0.3&#39;, author=&#39;Andrea Grandi&#39;, author_email=&#39;a.grandi@gmail.com&#39;, description=&#39;Python client library for Toshl API.&#39;, packages=find_packages(exclude=[&#39;tests&#39;]), zip_safe=False, include_package_data=True, platforms=&#39;any&#39;, license=&#39;MIT&#39;, install_requires=[ &#39;requests==2.9.1&#39;, ], ) Upload the package to PyPI Test server The first time you upload the package you will need to register it: python setup.py register -r pypitest and then you will need to build the package and upload it (please note I&#39;m using the --sign to sign the package with PGP): python setup.py sdist upload --sign -r pypitest Upload the package to PyPI production server Once you have verified that you are able to build and upload the package to the test server (without getting any errors), you should upload it to the production server: python setup.py register -r pypi python setup.py sdist upload --sign -r pypi This is everything you need to do if you want to publish a Python package on PyPI. Happy coding!" />
<meta name="keywords" content="pip, pypi, Python">


<meta property="og:site_name" content="Andrea Grandi"/>
<meta property="og:title" content="How to publish a Python package to PyPI"/>
<meta property="og:description" content="PyPI is the Python Package Index, that archive that let you install a package using pip, for example: pip install Flask In the past days I started writing a Python API client for Toshl expense manager and I decided to publish the library on PyPI. You can have a look at my library here https://github.com/andreagrandi/toshl-python (please note: it&#39;s still in development and Toshl API is not even public yet) in case you are not sure how to structure it. I found a nice guide but it wasn&#39;t complete (for example it didn&#39;t say how to sign packages) so I decided to rewrite it adding more information. Create PyPI accounts To publish packages on PyPI you need to create two accounts: one for the production server and another one for the test server. When you register, please specify (if you have one, but I really hope you do) the PGP id of your public key. Once the accounts are created, you need to create a file named .pypirc in your \$HOME folder containing the following configuration: [distutils] index-servers = pypi pypitest [pypi] repository=https://pypi.python.org/pypi username=your_username password=your_password [pypitest] repository=https://testpypi.python.org/pypi username=your_username password=your_password Please substitute your_username and your_password with the details you sent during the registration. Preparing the package I assume you have structured your library in the proper way and have included a setup.py with all the configuration (it&#39;s not something specific to PyPI so you should have done it already). If you haven&#39;t I remember you can give a look at my library here https://github.com/andreagrandi/toshl-python in particular to the setup.py: from setuptools import setup, find_packages setup( name=&#39;toshl&#39;, version=&#39;0.0.3&#39;, url=&#39;https://github.com/andreagrandi/toshl-python&#39;, download_url=&#39;https://github.com/andreagrandi/toshl-python/tarball/0.0.3&#39;, author=&#39;Andrea Grandi&#39;, author_email=&#39;a.grandi@gmail.com&#39;, description=&#39;Python client library for Toshl API.&#39;, packages=find_packages(exclude=[&#39;tests&#39;]), zip_safe=False, include_package_data=True, platforms=&#39;any&#39;, license=&#39;MIT&#39;, install_requires=[ &#39;requests==2.9.1&#39;, ], ) Upload the package to PyPI Test server The first time you upload the package you will need to register it: python setup.py register -r pypitest and then you will need to build the package and upload it (please note I&#39;m using the --sign to sign the package with PGP): python setup.py sdist upload --sign -r pypitest Upload the package to PyPI production server Once you have verified that you are able to build and upload the package to the test server (without getting any errors), you should upload it to the production server: python setup.py register -r pypi python setup.py sdist upload --sign -r pypi This is everything you need to do if you want to publish a Python package on PyPI. Happy coding!"/>
<meta property="og:locale" content="en_US"/>
<meta property="og:url" content="https://www.andreagrandi.it/2016/04/10/how-to-publish-a-python-package-to-pypi/"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2016-04-10 19:05:00+02:00"/>
<meta property="article:modified_time" content=""/>
<meta property="article:author" content="https://www.andreagrandi.it/author/andrea-grandi.html">
<meta property="article:section" content="Development"/>
<meta property="article:tag" content="pip"/>
<meta property="article:tag" content="pypi"/>
<meta property="article:tag" content="Python"/>
<meta property="og:image" content="/images/me_pycon_2019_2_300x300.jpg">

  <title>Andrea Grandi &ndash; How to publish a Python package to PyPI</title>


  <link rel="canonical" href="https://www.andreagrandi.it/2016/04/10/how-to-publish-a-python-package-to-pypi/" />

  <link rel="me" href="https://mastodon.social/@andreagrandi" />
</head>

<body class="light-theme"
>
  <aside>
    <div>
      <a href="https://www.andreagrandi.it">
        <img src="/images/me_pycon_2019_2_300x300.jpg" alt="Andrea Grandi" title="Andrea Grandi">
      </a>

      <h1>
        <a href="https://www.andreagrandi.it">Andrea Grandi</a>
      </h1>

<p>Software Developer</p>
      <form class="navbar-search" action="/search.html" role="search">
        <input type="text" name="q" id="tipue_search_input" placeholder="Search...">
      </form>

      <nav>
        <ul class="list">


          <li>
            <a target="_self"
              href="https://www.andreagrandi.it/about/">
              About
            </a>
          </li>
          <li>
            <a target="_self"
              href="https://www.andreagrandi.it/curriculum/">
              Curriculum
            </a>
          </li>
          <li>
            <a target="_self"
              href="https://www.andreagrandi.it/pgp-key/">
              PGP Key
            </a>
          </li>

        </ul>
      </nav>

      <ul class="social">
        <li>
          <a rel="me"  class="sc-mastodon" href="https://mastodon.social/@andreagrandi" target="_blank">
            <i class="fab fa-mastodon"></i>
          </a>
        </li>
        <li>
          <a  class="sc-github" href="https://github.com/andreagrandi" target="_blank">
            <i class="fab fa-github"></i>
          </a>
        </li>
        <li>
          <a  class="sc-linkedin" href="https://www.linkedin.com/in/andreagrandi/" target="_blank">
            <i class="fab fa-linkedin"></i>
          </a>
        </li>
      </ul>
    </div>


    <a href="https://tree-nation.com/profile/impact/andreagrandi#co2" target="_blank" style="position:relative;cursor:pointer;display:block;z-index:999;">
    <img src="https://tree-nation.com/images/tracking/label-co2-website-white-en.png" style="width:157px;height:auto;">
    </a>
    <script src="https://tree-nation.com/js/track.js"></script>
    <script>treenation_track("63a8beb06e6e6");</script>
  </aside>
  <main>

    <nav>
      <a href="https://www.andreagrandi.it">Home</a>

      <a href="/archives.html">Archives</a>
      <a href="/categories.html">Categories</a>
      <a href="/tags.html">Tags</a>


      <a href="https://www.andreagrandi.it/feeds/all.rss.xml">RSS</a>
    </nav>

<article class="single">
  <header>
      
    <h1 id="how-to-publish-a-python-package-to-pypi">How to publish a Python package to PyPI</h1>
    <p>
      Posted on Sun 10 April 2016 in <a href="https://www.andreagrandi.it/category/development.html">Development</a>

    </p>
  </header>


  <div>
    <p><strong>PyPI</strong> is the <strong>Python Package Index</strong>, that archive that let you
install a package using pip, for example: <strong>pip install Flask</strong></p>
<p>In the past days I started writing a <strong>Python API client</strong> for
<strong><a href="https://www.toshl.com">Toshl</a></strong> expense manager and I decided to
publish the library on PyPI. You can have a look at my library
here <a href="https://github.com/andreagrandi/toshl-python">https://github.com/andreagrandi/toshl-python</a> (please note: it's
still in development and <a href="https://developer.toshl.com/">Toshl API</a> is
not even public yet) in case you are not sure how to structure it.</p>
<p>I found a <a href="http://peterdowns.com/posts/first-time-with-pypi.html">nice
guide</a> but it
wasn't complete (for example it didn't say how to sign packages) so I
decided to rewrite it adding more information.</p>
<h3>Create PyPI accounts</h3>
<p>To publish packages on PyPI you need to create two accounts: one for the
<a href="http://pypi.python.org/pypi?%3Aaction=register_form">production server</a>
and another one for the <a href="http://testpypi.python.org/pypi?%3Aaction=register_form">test
server</a>. When
you register, please specify (if you have one, but I really hope you do)
the <strong>PGP</strong> id of your public key. Once the accounts are created, you
need to create a file named <strong>.pypirc</strong> in your \$HOME folder containing
the following configuration:</p>
<div class="highlight"><pre><span></span><code><span class="o">[</span>distutils<span class="o">]</span>
index-servers<span class="w"> </span><span class="o">=</span>
pypi
pypitest

<span class="o">[</span>pypi<span class="o">]</span>
<span class="nv">repository</span><span class="o">=</span>https://pypi.python.org/pypi
<span class="nv">username</span><span class="o">=</span>your_username
<span class="nv">password</span><span class="o">=</span>your_password

<span class="o">[</span>pypitest<span class="o">]</span>
<span class="nv">repository</span><span class="o">=</span>https://testpypi.python.org/pypi
<span class="nv">username</span><span class="o">=</span>your_username
<span class="nv">password</span><span class="o">=</span>your_password
</code></pre></div>

<p>Please substitute <strong>your_username</strong> and <strong>your_password</strong> with the
details you sent during the registration.</p>
<h3>Preparing the package</h3>
<p>I assume you have structured your library in the proper way and have
included a <strong>setup.py</strong> with all the configuration (it's not something
specific to PyPI so you should have done it already). If you haven't I
remember you can give a look at my library
here <a href="https://github.com/andreagrandi/toshl-python">https://github.com/andreagrandi/toshl-python</a> in particular to the
<strong>setup.py</strong>:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">setuptools</span> <span class="kn">import</span> <span class="n">setup</span><span class="p">,</span> <span class="n">find_packages</span>

<span class="n">setup</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;toshl&#39;</span><span class="p">,</span>
    <span class="n">version</span><span class="o">=</span><span class="s1">&#39;0.0.3&#39;</span><span class="p">,</span>
    <span class="n">url</span><span class="o">=</span><span class="s1">&#39;https://github.com/andreagrandi/toshl-python&#39;</span><span class="p">,</span>
    <span class="n">download_url</span><span class="o">=</span><span class="s1">&#39;https://github.com/andreagrandi/toshl-python/tarball/0.0.3&#39;</span><span class="p">,</span>
    <span class="n">author</span><span class="o">=</span><span class="s1">&#39;Andrea Grandi&#39;</span><span class="p">,</span>
    <span class="n">author_email</span><span class="o">=</span><span class="s1">&#39;a.grandi@gmail.com&#39;</span><span class="p">,</span>
    <span class="n">description</span><span class="o">=</span><span class="s1">&#39;Python client library for Toshl API.&#39;</span><span class="p">,</span>
    <span class="n">packages</span><span class="o">=</span><span class="n">find_packages</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;tests&#39;</span><span class="p">]),</span>
    <span class="n">zip_safe</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">include_package_data</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">platforms</span><span class="o">=</span><span class="s1">&#39;any&#39;</span><span class="p">,</span>
    <span class="n">license</span><span class="o">=</span><span class="s1">&#39;MIT&#39;</span><span class="p">,</span>
    <span class="n">install_requires</span><span class="o">=</span><span class="p">[</span>
        <span class="s1">&#39;requests==2.9.1&#39;</span><span class="p">,</span>
    <span class="p">],</span>
<span class="p">)</span>
</code></pre></div>

<h3>Upload the package to PyPI Test server</h3>
<p>The first time you upload the package you will need to register it:</p>
<div class="highlight"><pre><span></span><code>python<span class="w"> </span>setup.py<span class="w"> </span>register<span class="w"> </span>-r<span class="w"> </span>pypitest
</code></pre></div>

<p>and then you will need to build the package and upload it (please note
I'm using the <strong>--sign</strong> to sign the package with PGP):</p>
<div class="highlight"><pre><span></span><code>python<span class="w"> </span>setup.py<span class="w"> </span>sdist<span class="w"> </span>upload<span class="w"> </span>--sign<span class="w"> </span>-r<span class="w"> </span>pypitest
</code></pre></div>

<h3>Upload the package to PyPI production server</h3>
<p>Once you have verified that you are able to build and upload the package
to the test server (without getting any errors), you should upload it to
the production server:</p>
<div class="highlight"><pre><span></span><code>python<span class="w"> </span>setup.py<span class="w"> </span>register<span class="w"> </span>-r<span class="w"> </span>pypi
python<span class="w"> </span>setup.py<span class="w"> </span>sdist<span class="w"> </span>upload<span class="w"> </span>--sign<span class="w"> </span>-r<span class="w"> </span>pypi
</code></pre></div>

<p>This is everything you need to do if you want to publish a Python
package on PyPI. Happy coding!</p>
  </div>
  <div class="tag-cloud">
    <p>
      <a href="https://www.andreagrandi.it/tag/pip.html">pip</a>
      <a href="https://www.andreagrandi.it/tag/pypi.html">pypi</a>
      <a href="https://www.andreagrandi.it/tag/python.html">Python</a>
    </p>
  </div>





<!-- Disqus -->
<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'andrea-grandi-it';
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>
    Please enable JavaScript to view comments.
</noscript>
<!-- End Disqus -->
</article>

    <footer>
<p>
  &copy; 2023  - This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>
</p>
<p>
  Built with <a href="http://getpelican.com" target="_blank">Pelican</a> using <a href="http://bit.ly/flex-pelican" target="_blank">Flex</a> theme - source code available on <a href="https://github.com/andreagrandi/andreagrandi.it" target="_blank">GitHub</a>
</p><p>
  <a rel="license"
     href="http://creativecommons.org/licenses/by-sa/4.0/"
     target="_blank">
    <img alt="Creative Commons License"
         title="Creative Commons License"
         style="border-width:0"
           src="images/by-sa.png"
         width="80"
         height="15"/>
  </a>
</p>    </footer>
  </main>




<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " Andrea Grandi ",
  "url" : "https://www.andreagrandi.it",
  "image": "/images/me_pycon_2019_2_300x300.jpg",
  "description": ""
}
</script>

  <script>
    $(document).ready(function () {
      $('#tipue_search_input').tipuesearch();
    });
  </script>

</body>

</html>