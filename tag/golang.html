<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
        <title>Andrea Grandi - golang</title>
        <link rel="stylesheet" href="https://www.andreagrandi.it/theme/css/main.css" />
        <link rel="stylesheet" href="https://www.andreagrandi.it/theme/tipuesearch/css/tipuesearch.css">
        <link href="https://www.andreagrandi.it/feeds/all.rss.xml" type="application/rss+xml" rel="alternate" title="Andrea Grandi RSS Feed" />

        <!--[if IE]>
            <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
        <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
        <link rel="icon" href="/favicon.ico" type="image/x-icon">
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="https://www.andreagrandi.it/">Andrea Grandi</a></h1>
                <nav><ul>
    
                        <li><a href="https://www.andreagrandi.it/about/">About</a></li>
    
                        <li><a href="https://www.andreagrandi.it/curriculum/">Curriculum</a></li>
    
                        <li><a href="https://www.andreagrandi.it/pgp-key/">PGP Key</a></li>
                </ul>
<form id="search" action="https://www.andreagrandi.it/search.html" onsubmit="return validateForm(this.elements['q'].value);">
                        <input type="text" class="search-query" placeholder="" name="q" id="tipue_search_input">
                    </form>
                </nav>
        </header><!-- /#banner -->

            <aside id="featured" class="body">
                <article>
                    <h1 class="entry-title"><a href="https://www.andreagrandi.it/2015/04/19/goenv-go-environment-manager/">Goenv - Go Environment Manager</a></h1>
<footer class="post-info">
        <span>Sun 19 April 2015</span>
	        <span>| in <a href="https://www.andreagrandi.it/category/go-howto-programmazione.html">Go, HowTo, Programmazione</a></span>
<span>| tags: <a href="https://www.andreagrandi.it/tag/go.html">go</a><a href="https://www.andreagrandi.it/tag/golang.html">golang</a></span>
</footer><!-- /.post-info --><p>To briefly explain what
<a href="https://bitbucket.org/ymotongpoo/goenv"><strong>Goenv</strong></a> is, I will assume
you have previously worked with <strong>Python</strong>. Basically it's what
<strong>Virtualenv</strong> is for Python. Goenv (and it's wrapper <strong>goof</strong>) creates
a folder for a new project and set the <strong>\$GOPATH</strong> env variable to that
folder path. At this point every time you do <strong>go get</strong>, the libraries
will be installed in that specific <strong>\$GOPATH</strong>.</p>
<p>It's very important to use separate \$GOPATH for each project, because
this allow us to use different library versions for each project and
<strong>avoid version conflicts</strong>.</p>
<h1>Installation</h1>
<p>``` {.toolbar:2 .lang:zsh .highlight:0 .decode:true}
$ git clone https://bitbucket.org/ymotongpoo/goenv
$ cd goenv
$ go build -o goenv *.go
$ chmod +x goenv
$ sudo cp goenv /usr/bin</p>
<div class="highlight"><pre><span></span><span class="n">Goenv</span> <span class="k">is</span> <span class="n">now</span> <span class="n">installed</span><span class="p">,</span> <span class="n">we</span> <span class="n">will</span> <span class="n">now</span> <span class="n">install</span> <span class="n">its</span> <span class="n">wrapper</span> <span class="o">**</span><span class="n">goof</span><span class="o">**</span><span class="p">:</span>

<span class="o">```</span> <span class="err">{</span><span class="p">.</span><span class="n">toolbar</span><span class="p">:</span><span class="mi">2</span> <span class="p">.</span><span class="n">lang</span><span class="p">:</span><span class="n">zsh</span> <span class="p">.</span><span class="n">highlight</span><span class="p">:</span><span class="mi">0</span> <span class="p">.</span><span class="n">decode</span><span class="p">:</span><span class="k">true</span><span class="err">}</span>
<span class="err">$</span> <span class="n">sudo</span> <span class="n">cp</span> <span class="n">shellscripts</span><span class="o">/</span><span class="n">goenvwrapper</span><span class="p">.</span><span class="n">sh</span> <span class="o">/</span><span class="n">usr</span><span class="o">/</span><span class="n">bin</span>
</pre></div>


<p>Edit <strong>.bashrc</strong> (or <strong>.zshrc</strong> if you use zsh) and append these lines:</p>
<p>``` {.toolbar:2 .lang:zsh .decode:true}
export GOENVHOME=$HOME/goenvs
source /usr/bin/goenvwrapper.sh</p>
<div class="highlight"><pre><span></span><span class="gh">How to use it</span>
<span class="gh">=============</span>

To <span class="gs">**create**</span> a new go environment use <span class="gs">**make**</span>:

<span class="s">``` {.toolbar:2 .lang:default .highlight:0 .decode:true}</span>
<span class="s">➜  ~  goof make go-test</span>
<span class="s">Do you want to create all parental directory of &#39;/Users/andrea/goenvs/go-test&#39;? [y/N]: y</span>
<span class="s">Environment /Users/andrea/goenvs/go-test created!</span>
<span class="s">(go:go-test) ➜  go-test</span>
</pre></div>


<p>To exit the go environment use <strong>deactivate</strong>:</p>
<p>``` {.toolbar:2 .lang:default .highlight:0 .decode:true}
(go:go-test) ➜  go-test  deactivate
➜  go-test</p>
<div class="highlight"><pre><span></span><span class="k">To</span><span class="w"> </span><span class="k">use</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">environment</span><span class="w"> </span><span class="k">use</span><span class="w"> </span><span class="o">**</span><span class="n">workon</span><span class="o">**</span><span class="err">:</span><span class="w"></span>

<span class="err">```</span><span class="w"> </span><span class="err">{</span><span class="p">.</span><span class="nl">toolbar</span><span class="p">:</span><span class="mi">2</span><span class="w"> </span><span class="p">.</span><span class="nl">lang</span><span class="p">:</span><span class="k">default</span><span class="w"> </span><span class="p">.</span><span class="nl">highlight</span><span class="p">:</span><span class="mi">0</span><span class="w"> </span><span class="p">.</span><span class="nl">decode</span><span class="p">:</span><span class="k">true</span><span class="err">}</span><span class="w"></span>
<span class="err">➜</span><span class="w">  </span><span class="k">go</span><span class="o">-</span><span class="n">test</span><span class="w">  </span><span class="n">goof</span><span class="w"> </span><span class="n">workon</span><span class="w"> </span><span class="k">go</span><span class="o">-</span><span class="n">test</span><span class="w"></span>
<span class="p">(</span><span class="k">go</span><span class="err">:</span><span class="k">go</span><span class="o">-</span><span class="n">test</span><span class="p">)</span><span class="w"> </span><span class="err">➜</span><span class="w">  </span><span class="k">go</span><span class="o">-</span><span class="n">test</span><span class="w"></span>
</pre></div>


<p>To show available environments use <strong>show</strong>:</p>
<p><code>{.toolbar:2 .lang:default .highlight:0 .decode:true}
(go:go-test) ➜  go-test  goof show
* go-test</code></p>
<p>Goenv itself is not enough to manage Go packages. It would be like using
<strong>Virtualenv</strong> only and not using <strong>pip</strong> and <strong>requirements</strong>. In a
future post I will explain how to use
<a href="https://github.com/tools/godep"><strong>Godep</strong></a>.</p><p><a href="https://www.andreagrandi.it/2015/04/19/goenv-go-environment-manager/#disqus_thread">comments</a></p>                </article>
            </aside><!-- /#featured -->
                <section id="content" class="body">
                    <h1>Other articles</h1>
                    <ol id="posts-list" class="hfeed">

            <li><article class="hentry">
                <header>
                    <h1><a href="https://www.andreagrandi.it/2015/03/16/go-defining-methods-on-struct-types/" rel="bookmark"
                           title="Permalink to Go: defining methods on struct types">Go: defining methods on struct types</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <span>Mon 16 March 2015</span>
	        <span>| in <a href="https://www.andreagrandi.it/category/go.html">Go</a></span>
<span>| tags: <a href="https://www.andreagrandi.it/tag/go.html">go</a><a href="https://www.andreagrandi.it/tag/golang.html">golang</a><a href="https://www.andreagrandi.it/tag/programming.html">programming</a><a href="https://www.andreagrandi.it/tag/struct.html">struct</a></span>
</footer><!-- /.post-info -->                <p>In <strong>Go</strong> it's possible to define <strong>methods</strong> on <strong>struct types</strong>. The
syntax needed for it can be a bit strange for people that are used to
define classes and methods in Java, C# etc... but once you learn it
it's quite easy to use.</p>
<p>In my case for example I needed something that could contain a Timer
object, a string and a method that could start the timer and call a
method at the end of the Timer execution. I implemented it in this way:</p>
<p>``` {.toolbar:2 .lang:go .decode:true}
type DeviceTimer struct {
    DeviceID    string
    DeviceTimer *time.Timer
}</p>
<p>func (timer DeviceTimer) startTimer() {
    &lt;-timer.DeviceTimer.C
    notifyDeviceTimerExpired(timer.DeviceID)
}</p>
<div class="highlight"><pre><span></span><span class="n">The</span><span class="w"> </span><span class="k">key</span><span class="w"> </span><span class="n">point</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="o">**</span><span class="k">row</span><span class="w"> </span><span class="mi">6</span><span class="o">**</span><span class="w"> </span><span class="ss">&quot;*func (timer DeviceTimer) startTimer() { ...</span>
<span class="ss">}*&quot;</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">I</span><span class="w"> </span><span class="n">defined</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="k">method</span><span class="w"> </span><span class="k">called</span><span class="w"> </span><span class="o">**</span><span class="n">startTimer</span><span class="o">**</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">I</span><span class="w"> </span><span class="n">specify</span><span class="w"> </span><span class="n">timer</span><span class="w"></span>
<span class="o">**</span><span class="n">DeviceTimer</span><span class="o">**</span><span class="w"> </span><span class="n">inside</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">func</span><span class="w"> </span><span class="n">definition</span><span class="p">.</span><span class="w"> </span><span class="n">This</span><span class="w"> </span><span class="n">basically</span><span class="w"> </span><span class="ss">&quot;extends&quot;</span><span class="w"> </span><span class="n">the</span><span class="w"></span>
<span class="n">struct</span><span class="w"> </span><span class="n">DeviceTimer</span><span class="w"> </span><span class="n">adding</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="k">method</span><span class="w"> </span><span class="k">to</span><span class="w"> </span><span class="n">it</span><span class="p">.</span><span class="w"> </span><span class="n">This</span><span class="w"> </span><span class="n">means</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">I</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="k">call</span><span class="w"></span>
<span class="n">that</span><span class="w"> </span><span class="k">method</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="n">this</span><span class="w"> </span><span class="nl">way</span><span class="p">:</span><span class="w"></span>

<span class="err">```</span><span class="w"> </span><span class="err">{</span><span class="p">.</span><span class="nl">toolbar</span><span class="p">:</span><span class="mi">2</span><span class="w"> </span><span class="p">.</span><span class="nl">lang</span><span class="p">:</span><span class="k">go</span><span class="w"> </span><span class="p">.</span><span class="nl">decode</span><span class="p">:</span><span class="k">true</span><span class="err">}</span><span class="w"></span>
<span class="n">timer</span><span class="w"> </span><span class="err">:</span><span class="o">=</span><span class="w"> </span><span class="nc">time</span><span class="p">.</span><span class="n">NewTimer</span><span class="p">(</span><span class="nc">time</span><span class="p">.</span><span class="n">Millisecond</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">300</span><span class="p">)</span><span class="w"></span>
<span class="n">device_timer</span><span class="w"> </span><span class="err">:</span><span class="o">=</span><span class="w"> </span><span class="n">DeviceTimer</span><span class="err">{</span><span class="ss">&quot;abc123&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">timer</span><span class="err">}</span><span class="w"></span>
<span class="k">go</span><span class="w"> </span><span class="n">device_timer</span><span class="p">.</span><span class="n">startTimer</span><span class="p">()</span><span class="w"></span>
</pre></div>


<p>This is all you need to do. If you want to read more about this subject,
I can suggest to read these two articles:</p>
<ul>
<li><strong>Go by Example: Methods</strong> <a href="https://gobyexample.com/methods">https://gobyexample.com/methods</a></li>
<li><strong>Inheritance and subclassing in Go - or its near likeness</strong>
    <a href="http://golangtutorials.blogspot.co.uk/2011/06/inheritance-and-subclassing-in-go-or.html">http://golangtutorials.blogspot.co.uk/2011/06/inheritance-and-subclassing-in-go-or.html</a></li>
</ul>
<p><strong>Note:</strong> I'm not a Go expert and these are just my personal notes I'm
taking during my learning experience. I'm very keen to share my notes
with everyone, but please don't take them as notes from an expert Go
developer.</p>
                <a class="readmore" href="https://www.andreagrandi.it/2015/03/16/go-defining-methods-on-struct-types/">read more</a>
<p><a href="https://www.andreagrandi.it/2015/03/16/go-defining-methods-on-struct-types/#disqus_thread">comments</a></p>                </div><!-- /.entry-content -->
            </article></li>
            </ol><!-- /#posts-list -->
<p class="paginator">
    Page 1 / 1
</p>
            </section><!-- /#content -->
        <section id="extras" class="body">
                <div class="social">
                        <h2>social</h2>
                        <ul>
                            <li><a href="https://www.andreagrandi.it/feeds/all.rss.xml" type="application/rss+xml" rel="alternate">rss feed</a></li>

                            <li><a href="https://twitter.com/andreagrandi">twitter</a></li>
                            <li><a href="https://github.com/andreagrandi">github</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <p>
                    Powered by <a href="http://getpelican.com/">Pelican</a> and Python -
                    Source code available on <a href="https://github.com/andreagrandi/andreagrandi.it">GitHub</a>
                    <a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/">
                        <img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc/4.0/80x15.png" />
                    </a>
                </p>
        </footer><!-- /#contentinfo -->

    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-2140684-3']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>
<script type="text/javascript">
    var disqus_shortname = 'andrea-grandi-it';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
</body>
</html>