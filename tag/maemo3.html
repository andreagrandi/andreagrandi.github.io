
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="robots" content="" />

  <link
    href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,400;0,700;1,400&family=Source+Sans+Pro:ital,wght@0,300;0,400;0,700;1,400&display=swap"
    rel="stylesheet">

  <link rel="stylesheet" type="text/css" href="https://www.andreagrandi.it/theme/stylesheet/style.min.css">


  <link id="pygments-light-theme" rel="stylesheet" type="text/css"     href="https://www.andreagrandi.it/theme/pygments/monokai.min.css">

  <script src="https://www.andreagrandi.it/theme/tipuesearch/jquery.min.js"></script>
  <script defer src="https://www.andreagrandi.it/theme/tipuesearch/tipuesearch.min.js"></script>
  <script defer src="https://www.andreagrandi.it/theme/tipuesearch/tipuesearch_set.js"></script>
  <script defer src="https://www.andreagrandi.it/tipuesearch_content.js"></script>
  <link rel="stylesheet" href="https://www.andreagrandi.it/theme/tipuesearch/tipuesearch.min.css" />

  <link rel="stylesheet" type="text/css" href="https://www.andreagrandi.it/theme/font-awesome/css/fontawesome.css">
  <link rel="stylesheet" type="text/css" href="https://www.andreagrandi.it/theme/font-awesome/css/brands.css">
  <link rel="stylesheet" type="text/css" href="https://www.andreagrandi.it/theme/font-awesome/css/solid.css">



  <link href="https://www.andreagrandi.it/feeds/all.rss.xml" type="application/rss+xml" rel="alternate"
    title="Andrea Grandi RSS">


  <!-- Chrome, Firefox OS and Opera -->
  <meta name="theme-color" content="#333333">
  <!-- Windows Phone -->
  <meta name="msapplication-navbutton-color" content="#333333">
  <!-- iOS Safari -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <!-- Microsoft EDGE -->
  <meta name="msapplication-TileColor" content="#333333">

  <meta name="author" content="Andrea Grandi" />
  <meta name="description" content="" />
<meta property="og:site_name" content="Andrea Grandi"/>
<meta property="og:type" content="blog"/>
<meta property="og:title" content="Andrea Grandi"/>
<meta property="og:description" content=""/>
<meta property="og:locale" content="en_US"/>
<meta property="og:url" content="https://www.andreagrandi.it"/>
<meta property="og:image" content="/images/me_pycon_2019_2_300x300.jpg">

  <title>Andrea Grandi &ndash; Tag maemo</title>



  <link rel="me" href="https://mastodon.social/@andreagrandi" />
</head>

<body class="light-theme"
>
  <aside>
    <div>
      <a href="https://www.andreagrandi.it">
        <img src="/images/me_pycon_2019_2_300x300.jpg" alt="Andrea Grandi" title="Andrea Grandi">
      </a>

      <h1>
        <a href="https://www.andreagrandi.it">Andrea Grandi</a>
      </h1>

<p>Software Developer</p>
      <form class="navbar-search" action="/search.html" role="search">
        <input type="text" name="q" id="tipue_search_input" placeholder="Search...">
      </form>

      <nav>
        <ul class="list">


          <li>
            <a target="_self"
              href="https://www.andreagrandi.it/about/">
              About
            </a>
          </li>
          <li>
            <a target="_self"
              href="https://www.andreagrandi.it/curriculum/">
              Curriculum
            </a>
          </li>
          <li>
            <a target="_self"
              href="https://www.andreagrandi.it/pgp-key/">
              PGP Key
            </a>
          </li>

        </ul>
      </nav>

      <ul class="social">
        <li>
          <a rel="me"  class="sc-mastodon" href="https://mastodon.social/@andreagrandi" target="_blank">
            <i class="fab fa-mastodon"></i>
          </a>
        </li>
        <li>
          <a  class="sc-github" href="https://github.com/andreagrandi" target="_blank">
            <i class="fab fa-github"></i>
          </a>
        </li>
        <li>
          <a  class="sc-linkedin" href="https://www.linkedin.com/in/andreagrandi/" target="_blank">
            <i class="fab fa-linkedin"></i>
          </a>
        </li>
      </ul>
    </div>


    <a href="https://tree-nation.com/profile/impact/andreagrandi#co2" target="_blank" style="position:relative;cursor:pointer;display:block;z-index:999;">
    <img src="https://tree-nation.com/images/tracking/label-co2-website-white-en.png" style="width:157px;height:auto;">
    </a>
    <script src="https://tree-nation.com/js/track.js"></script>
    <script>treenation_track("63a8beb06e6e6");</script>
  </aside>
  <main>

    <nav>
      <a href="https://www.andreagrandi.it">Home</a>

      <a href="/archives.html">Archives</a>
      <a href="/categories.html">Categories</a>
      <a href="/tags.html">Tags</a>


      <a href="https://www.andreagrandi.it/feeds/all.rss.xml">RSS</a>
    </nav>



<article>
  <header>
    <h2><a href="https://www.andreagrandi.it/2009/08/13/writing-python-bindings-of-existing-c-libraries-building-and-installing-with-distutils/">Writing Python bindings of existing C libraries – (3) – Building and Installing with distutils</a></h2>
    <p>
      Posted on Thu 13 August 2009 in <a href="https://www.andreagrandi.it/category/howto-igalia-linux-maemo-en-programmazione-python.html">HowTo, Igalia, Linux, Maemo (EN), Programmazione, Python</a>

          &#8226; Tagged with
              <a href="https://www.andreagrandi.it/tag/binding.html">binding</a>,              <a href="https://www.andreagrandi.it/tag/distutils.html">distutils</a>,              <a href="https://www.andreagrandi.it/tag/library.html">library</a>,              <a href="https://www.andreagrandi.it/tag/maemo.html">maemo</a>,              <a href="https://www.andreagrandi.it/tag/python.html">Python</a>,              <a href="https://www.andreagrandi.it/tag/setup.html">setup</a>
    </p>
  </header>
  <div>
      <p>In the last post of this series, we saw how to write a simple binding
and we finished to build and install it manually. This is of course not
a good way to manage the building/installation procedure.</p>
<p>In Python we can use a library called <strong>distutils</strong> that let us to
automatize the building and installing process. I'll use the <strong>foo</strong>
source code to create the package, so it will be easier to understand.</p>
<h2>Using distutils</h2>
<p>All we have to do is to write a <strong>setup.py</strong> file similar to this one:</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">distutils.core</span> <span class="kn">import</span> <span class="n">setup</span><span class="p">,</span> <span class="n">Extension</span>

<span class="n">foomodule</span> <span class="o">=</span> <span class="n">Extension</span><span class="p">(</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="n">sources</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;foo.c&#39;</span><span class="p">])</span>

<span class="n">setup</span> <span class="p">(</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;Foo&#39;</span><span class="p">,</span>
    <span class="n">version</span> <span class="o">=</span> <span class="s1">&#39;1.0&#39;</span><span class="p">,</span>  
    <span class="n">description</span> <span class="o">=</span> <span class="s1">&#39;This is a package for Foo&#39;</span><span class="p">,</span>  
    <span class="n">ext_modules</span> <span class="o">=</span> <span class="p">[</span><span class="n">foomodule</span><span class="p">]</span>
<span class="p">)</span>
</code></pre></div>

<p>As you can see, we have to first import needed modules with: <strong>from
distutils.core import setup, Extension</strong><br>
then we create an entry for each module we have (in this case just one,
"foomodule"). We then call the <strong>setup()</strong> method passing it all the
parameters and our <strong>setup.py</strong> is complete.</p>
<h2>Building and installing</h2>
<p>To test it we can try to build the package in this way:</p>
<div class="highlight"><pre><span></span><code>python2.5<span class="w"> </span>setup.py<span class="w"> </span>build
</code></pre></div>

<p>if we want to install the module in our system:</p>
<div class="highlight"><pre><span></span><code>python2.5<span class="w"> </span>setup.py<span class="w"> </span>install
</code></pre></div>

<h2>References</h2>
<ul>
<li>Official Python documentation: <a href="http://docs.python.org/extending/building.html">http://docs.python.org/extending/building.html</a></li>
</ul>
  </div>
  <hr />
</article>
<article>
  <header>
    <h2><a href="https://www.andreagrandi.it/2009/08/10/pymaemo-python-for-maemo-second-beta-release-for-fremantle/">PyMaemo (Python for Maemo) second beta release for Fremantle</a></h2>
    <p>
      Posted on Mon 10 August 2009 in <a href="https://www.andreagrandi.it/category/igalia-linux-maemo-en-programmazione-python.html">Igalia, Linux, Maemo (EN), Programmazione, Python</a>

          &#8226; Tagged with
              <a href="https://www.andreagrandi.it/tag/bindings.html">bindings</a>,              <a href="https://www.andreagrandi.it/tag/fremantle.html">fremantle</a>,              <a href="https://www.andreagrandi.it/tag/maemo.html">maemo</a>,              <a href="https://www.andreagrandi.it/tag/nokia.html">nokia</a>,              <a href="https://www.andreagrandi.it/tag/pymaemo.html">pymaemo</a>,              <a href="https://www.andreagrandi.it/tag/python.html">Python</a>,              <a href="https://www.andreagrandi.it/tag/tablet.html">tablet</a>
    </p>
  </header>
  <div>
      <p>The <strong>PyMaemo</strong> team is pleased to announce the second beta release of
PyMaemo for <strong>Fremantle</strong>!</p>
<p>This new release is available through the <strong>extras-devel</strong> repository,
see installation instructions in<br>
<a href="http://pymaemo.garage.maemo.org/sdk_installation.html#fremantle">http://pymaemo.garage.maemo.org/sdk_installation.html#fremantle</a></p>
<h2>What is it?</h2>
<p>Python for Maemo (PyMaemo for short) main objective is to make possible
to use <strong>Python</strong> programming language as the scripting and development
language for Maemo Platform, providing a better alternative for fast
prototyping and programming in Maemo environment besides the C
programming language.</p>
<p>Python is for serious programming and to have fun. Python has a nice
syntax, it is easy to learn and powerful enough for a vast range of
applications, this is why we choose Python for Maemo.</p>
<h2>What has changed?</h2>
<p><strong>New packages:</strong></p>
<ul>
<li><strong>python-mafw</strong> (0.1-1maemo1)<ul>
<li>Python bindings for the Media Application Framework [1]</li>
<li>Supported API is very basic at the moment, and there are some
    bugs. Feedback is welcome!</li>
</ul>
</li>
<li><strong>python-hildondesktop</strong> (0.0.3-1maemo1)<ul>
<li>Python bindings for the home/status widgets API</li>
</ul>
</li>
<li><strong>python-notify</strong> (0.1.1-2maemo1)<ul>
<li>Python bindings for libnotify</li>
</ul>
</li>
<li><strong>pyclutter</strong> (0.8.0-1maemo2)<ul>
<li>Python bindings for the Clutter API [2]</li>
<li>Experimental package, waiting for developer feedback</li>
</ul>
</li>
</ul>
<p><strong>Updated packages:</strong></p>
<ul>
<li><strong>gnome-python</strong> (2.26.1-1maemo1)<ul>
<li>major upgrade, matching current Debian testing release;</li>
<li>feedback on this is welcome, as it replaces a fairly old version
    (2.18).</li>
</ul>
</li>
<li><strong>pygtk</strong> (2.12.1-6maemo7)<ul>
<li>Enable glade support.</li>
</ul>
</li>
<li><strong>python2.5</strong> (2.5.4-1maemo1)<ul>
<li>Updated to latest upstream 2.5.x release.</li>
<li>add support to --install-layout=deb flag.</li>
</ul>
</li>
<li><strong>python-central</strong> (0.6.11.1maemo1)<ul>
<li>dependency needed by the new python-setuptools version.</li>
</ul>
</li>
<li><strong>python-defaults</strong> (2.5.2-3maemo3)<ul>
<li>Change PREVVER in debian/rules, avoiding old python2.5-minimal
    versions that had "/usr/bin/python" and thus conflicts with
    python-minimal.</li>
</ul>
</li>
<li><strong>python-hildo</strong>n (0.9.0-1maemo10)<ul>
<li>lots of bug fixes</li>
</ul>
</li>
<li><strong>python-setuptools</strong> (0.6c9-1maemo1)<ul>
<li>add support to --install-layout=deb flag.</li>
</ul>
</li>
</ul>
<p><strong>Bugs fixed:</strong> MB#4530 [3], MB#4450 [4], MB#4629 [5], MB#4628 [6],<br>
MB#4647 [7], MB#4632 [8],  MB#4646 [9],  MB#4750 [10], MB#4749 [11],<br>
MB#4791 [12]</p>
<h2>Known issues</h2>
<p>MB#4782 [13]: osso.Context causes segmentation fault<br>
MB#4821 [14]: Cannot create HildonTouchSelector with single text column<br>
MB#4824 [15]: python-mafw: source_browsing.py example does not work<br>
MB#4839 [16]: python-mafw: mafw.Registry lacks list_plugins() method<br>
MB#4849 [17]: python-mafw: MafwPluginDescriptorPublic structure is missing</p>
<p>We will not migrate to python2.6 in fremantle due to a (unresolved) bug
(MB#4734 [18]), where a core SDK package explicitly conflicts with
python &gt;= 2.6, preventing any further upgrades from the 2.5.x series.</p>
<p>This release is supposed to be compatible with previous releases. If you
have any issues regarding building your Python application on Fremantle,
feel free to report it on the pymaemo-developers mailing list [19].</p>
<h2>Acknowledgments</h2>
<p>Thanks to everybody who helped making this release possible.</p>
<p>Bug reports, as always, should go to our Bugzilla [20]. Use the
<strong>pymaemo-developers</strong> mailing list for help, feedback or suggestions.</p>
<h2>References</h2>
<p>[1] <a href="https://garage.maemo.org/projects/mafw/">https://garage.maemo.org/projects/mafw/</a><br>
[2] <a href="http://www.clutter-project.org/">http://www.clutter-project.org/</a><br>
[3] <a href="https://bugs.maemo.org/show_bug.cgi?id=4530">https://bugs.maemo.org/show_bug.cgi?id=4530</a><br>
[4] <a href="https://bugs.maemo.org/show_bug.cgi?id=4450">https://bugs.maemo.org/show_bug.cgi?id=4450</a><br>
[5] <a href="https://bugs.maemo.org/show_bug.cgi?id=4629">https://bugs.maemo.org/show_bug.cgi?id=4629</a><br>
[6] <a href="https://bugs.maemo.org/show_bug.cgi?id=4628">https://bugs.maemo.org/show_bug.cgi?id=4628</a><br>
[7] <a href="https://bugs.maemo.org/show_bug.cgi?id=4647">https://bugs.maemo.org/show_bug.cgi?id=4647</a><br>
[8] <a href="https://bugs.maemo.org/show_bug.cgi?id=4632">https://bugs.maemo.org/show_bug.cgi?id=4632</a><br>
[9] <a href="https://bugs.maemo.org/show_bug.cgi?id=4646">https://bugs.maemo.org/show_bug.cgi?id=4646</a><br>
[10] <a href="https://bugs.maemo.org/show_bug.cgi?id=4750">https://bugs.maemo.org/show_bug.cgi?id=4750</a><br>
[11] <a href="https://bugs.maemo.org/show_bug.cgi?id=4749">https://bugs.maemo.org/show_bug.cgi?id=4749</a><br>
[12] <a href="https://bugs.maemo.org/show_bug.cgi?id=4791">https://bugs.maemo.org/show_bug.cgi?id=4791</a><br>
[13] <a href="https://bugs.maemo.org/show_bug.cgi?id=4782">https://bugs.maemo.org/show_bug.cgi?id=4782</a><br>
[14] <a href="https://bugs.maemo.org/show_bug.cgi?id=4821">https://bugs.maemo.org/show_bug.cgi?id=4821</a><br>
[15] <a href="https://bugs.maemo.org/show_bug.cgi?id=4824">https://bugs.maemo.org/show_bug.cgi?id=4824</a><br>
[16] <a href="https://bugs.maemo.org/show_bug.cgi?id=4839">https://bugs.maemo.org/show_bug.cgi?id=4839</a><br>
[17] <a href="https://bugs.maemo.org/show_bug.cgi?id=4849">https://bugs.maemo.org/show_bug.cgi?id=4849</a><br>
[18] <a href="https://bugs.maemo.org/show_bug.cgi?id=4734">https://bugs.maemo.org/show_bug.cgi?id=4734</a><br>
[19] <a href="https://garage.maemo.org/mailman/listinfo/pymaemo-developers">https://garage.maemo.org/mailman/listinfo/pymaemo-developers</a><br>
[20] <a href="https://bugs.maemo.org/enter_bug.cgi?product=PyMaemo">https://bugs.maemo.org/enter_bug.cgi?product=PyMaemo</a></p>
<h2>Credits</h2>
<p>This post was possible thanks to <strong>Anderson Lizardo</strong>, from PyMaemo
team, who posted these informations on pymaemo-developers mailing list.</p>
  </div>
  <hr />
</article>
<article>
  <header>
    <h2><a href="https://www.andreagrandi.it/2009/08/08/making-maemo-email-client-usable-with-gmail/">Making Maemo email client usable with GMail</a></h2>
    <p>
      Posted on Sat 08 August 2009 in <a href="https://www.andreagrandi.it/category/howto-igalia-linux-maemo-en.html">HowTo, Igalia, Linux, Maemo (EN)</a>

          &#8226; Tagged with
              <a href="https://www.andreagrandi.it/tag/client.html">client</a>,              <a href="https://www.andreagrandi.it/tag/email.html">email</a>,              <a href="https://www.andreagrandi.it/tag/gmail.html">gmail</a>,              <a href="https://www.andreagrandi.it/tag/maemo.html">maemo</a>,              <a href="https://www.andreagrandi.it/tag/modest.html">modest</a>,              <a href="https://www.andreagrandi.it/tag/recent.html">recent</a>
    </p>
  </header>
  <div>
      <p>I must admit, I wasn't using Maemo email client, because I did find it
was simply unusable, at least with my GMail account.</p>
<p>I tried both POP3 and IMAP, but having about 25.000+ messages in my
account, downloading just the headers was a job that the client simply
couldn't manage.</p>
<p>Yesterday I knew about "<strong>recent mode</strong>" support in <strong>POP3</strong>, a
functionality that <strong>GMail</strong> supports too. This mode allow you to
download <strong>only last 30 days</strong> messages (in my case, no more than 1000) 
so the client can manage them without any problem.</p>
<p>All you have to do to enable this mode is put the "<strong>recent:</strong>" string
before the username. For example: if your username is
"username@gmail.com" you have to write "<strong>recent:username@gmail.com</strong>".
Important: this mode only works with POP3, not with IMAP.</p>
<p>To conclude, let me say <strong>thank you</strong> to the kind guy who let me
discover this mode. Thank you <a href="http://blogs.igalia.com/svillar/"><strong>Sergio</strong></a>!
Now there is another thing I can do with my tablet!</p>
  </div>
  <hr />
</article>
<article>
  <header>
    <h2><a href="https://www.andreagrandi.it/2009/08/06/writing-python-bindings-of-existing-c-libraries-a-simple-example-of-binding/">Writing Python bindings of existing C libraries – (2) – A simple example of binding</a></h2>
    <p>
      Posted on Thu 06 August 2009 in <a href="https://www.andreagrandi.it/category/howto-igalia-linux-maemo-en-programmazione-python.html">HowTo, Igalia, Linux, Maemo (EN), Programmazione, Python</a>

          &#8226; Tagged with
              <a href="https://www.andreagrandi.it/tag/binding.html">binding</a>,              <a href="https://www.andreagrandi.it/tag/igalia.html">Igalia</a>,              <a href="https://www.andreagrandi.it/tag/maemo.html">maemo</a>,              <a href="https://www.andreagrandi.it/tag/python.html">Python</a>
    </p>
  </header>
  <div>
      <h2>Introduction</h2>
<p>As I promised in the preceding post, I'll provide a very easy example of
a python binding. Let's suppose we don't want to use the methods
included in Python to sum two integer values and we want to do it in C
and then call the add method from a python script. I'll write the
complete source code first and then I'll explain all the parts of it.</p>
<h2>Source Code</h2>
<div class="highlight"><pre><span></span><code><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;Python.h&gt;</span>

<span class="k">static</span><span class="w"> </span><span class="n">PyObject</span><span class="w"> </span><span class="o">*</span><span class="nf">foo_add</span><span class="p">(</span><span class="n">PyObject</span><span class="w"> </span><span class="o">*</span><span class="n">self</span><span class="p">,</span><span class="w"> </span><span class="n">PyObject</span><span class="w"> </span><span class="o">*</span><span class="n">args</span><span class="p">)</span><span class="w">  </span>
<span class="p">{</span><span class="w">  </span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="p">;</span><span class="w">  </span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">b</span><span class="p">;</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">PyArg_ParseTuple</span><span class="p">(</span><span class="n">args</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ii&quot;</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">b</span><span class="p">))</span><span class="w">  </span>
<span class="w">    </span><span class="p">{</span><span class="w">  </span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span><span class="w">  </span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">Py_BuildValue</span><span class="p">(</span><span class="s">&quot;i&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span><span class="p">);</span><span class="w">  </span>
<span class="p">}</span>

<span class="k">static</span><span class="w"> </span><span class="n">PyMethodDef</span><span class="w"> </span><span class="n">foo_methods</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w">  </span>
<span class="w">    </span><span class="p">{</span><span class="w"> </span><span class="s">&quot;add&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="n">PyCFunction</span><span class="p">)</span><span class="n">foo_add</span><span class="p">,</span><span class="w"> </span><span class="n">METH_VARARGS</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="w"> </span><span class="p">},</span><span class="w">  </span>
<span class="w">    </span><span class="p">{</span><span class="w"> </span><span class="nb">NULL</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="w"> </span><span class="p">}</span><span class="w">  </span>
<span class="p">};</span>

<span class="n">PyMODINIT_FUNC</span><span class="w"> </span><span class="nf">initfoo</span><span class="p">()</span>
<span class="p">{</span><span class="w">  </span>
<span class="w">    </span><span class="n">Py_InitModule3</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">foo_methods</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;My first extension module.&quot;</span><span class="p">);</span><span class="w">  </span>
<span class="p">}</span>
</code></pre></div>

<h2>How it works</h2>
<p>First of all we have to include <strong>Python.h</strong> in our C file. This allows
us to write an extension for Python language. To be able to include this
header, we must have the python development packages installed in our
system. For example in Debian based distributions we can install them
with this command:</p>
<div class="highlight"><pre><span></span><code>sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>python2.5-dev
</code></pre></div>

<p>Every module has at least three parts. In the first part we write
methods we want to call from the final python module: in this case we
have a method called <strong>foo_add</strong> where "<em>foo</em>" is the name of the
module and "<em>add</em>" the name of the method. Every method is declared as
<strong>static PyObject</strong>. The method does anything particular except calling
PyArg_ParseTuple to validate the input (we'll discuss this later),
adding the two passed numbers and returning the result.</p>
<p>In the second part we have something like a dictionary, defined as
static <strong>PyMethodDef</strong> and called foo_methods (where "foo" again is the
name of the module). For each method we want to expose in our python
module, we have to add something like this:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span><span class="s2">&quot;add&quot;</span><span class="p">,</span> <span class="p">(</span><span class="n">PyCFunction</span><span class="p">)</span><span class="n">foo_add</span><span class="p">,</span> <span class="n">METH_VARARGS</span><span class="p">,</span> <span class="n">NULL</span><span class="p">}</span>
</code></pre></div>

<p>where "<em>add</em>" is the name of the method we want to be visible in our
module, <em>(PyCFunction)foo_add</em> is a pointer to our foo_add method,
implemented in the C module, METH_VARARGS means that we want to pass
some parameters to the function and the last one would be the
description of the method (we can leave it NULL if we want).</p>
<p>Third part allows us to register the defined method/s and the module:</p>
<div class="highlight"><pre><span></span><code><span class="n">Py_InitModule3</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">foo_methods</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;My first extension module.&quot;</span><span class="p">);</span>
</code></pre></div>

<h3>Parsing Parameters</h3>
<p>The <strong>PyArg_ParseTuple</strong> function extracts arguments from the
<strong>PyObject</strong> passed as parameter to the current method and follows
almost the sscanf syntax to parse parameters (in this case we had <em>"ii"</em>
for two integers). You can fin the complete reference here:
<a href="http://docs.python.org/c-api/arg.html">http://docs.python.org/c-api/arg.html</a></p>
<h2>Building and installing</h2>
<p>To build the module, we have to be in the source directory and execute
this command:</p>
<div class="highlight"><pre><span></span><code>gcc<span class="w"> </span>-shared<span class="w"> </span>-I/usr/include/python2.5<span class="w"> </span>foo.c<span class="w"> </span>-o<span class="w"> </span>foo.so
</code></pre></div>

<p>then we've to copy the generated module to the python's modules
directory:</p>
<div class="highlight"><pre><span></span><code>cp<span class="w"> </span>foo.so<span class="w"> </span>/usr/lib/python2.5/site-packages/
</code></pre></div>

<h2>Testing our module</h2>
<p>Testing the module is really easy. We've to start a python shell or
create a python script with the following source code:</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">foo</span>
<span class="nb">print</span> <span class="n">foo</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</code></pre></div>

<p>if all is working fine, the printed result should be <strong>5</strong></p>
<h2>References</h2>
<ul>
<li><a href="http://docs.python.org/extending/extending.html">http://docs.python.org/extending/extending.html</a></li>
<li><a href="http://www.wrox.com/WileyCDA/WroxTitle/productCd-0764596543.html">http://www.wrox.com/WileyCDA/WroxTitle/productCd-0764596543.html</a></li>
</ul>
  </div>
</article>

  <div class="pagination">
    <a class="btn float-left" href="https://www.andreagrandi.it/tag/maemo4.html">
      <i class="fa fa-angle-left"></i> Older Posts
    </a>
    <a class="btn float-right" href="https://www.andreagrandi.it/tag/maemo2.html">
      Newer Posts <i class="fa fa-angle-right"></i>
    </a>
  </div>



    <footer>
<p>
  &copy; 2023  - This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>
</p>
<p>
  Built with <a href="http://getpelican.com" target="_blank">Pelican</a> using <a href="http://bit.ly/flex-pelican" target="_blank">Flex</a> theme - source code available on <a href="https://github.com/andreagrandi/andreagrandi.it" target="_blank">GitHub</a>
</p><p>
  <a rel="license"
     href="http://creativecommons.org/licenses/by-sa/4.0/"
     target="_blank">
    <img alt="Creative Commons License"
         title="Creative Commons License"
         style="border-width:0"
           src="images/by-sa.png"
         width="80"
         height="15"/>
  </a>
</p>    </footer>
  </main>




<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " Andrea Grandi ",
  "url" : "https://www.andreagrandi.it",
  "image": "/images/me_pycon_2019_2_300x300.jpg",
  "description": ""
}
</script>

  <script>
    $(document).ready(function () {
      $('#tipue_search_input').tipuesearch();
    });
  </script>

</body>

</html>