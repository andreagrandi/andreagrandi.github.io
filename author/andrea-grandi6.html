<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
        <title>Andrea Grandi - Andrea Grandi</title>
        <link rel="stylesheet" href="https://www.andreagrandi.it/theme/css/main.css" />
        <link rel="stylesheet" href="https://www.andreagrandi.it/theme/tipuesearch/css/tipuesearch.css">
        <link href="https://www.andreagrandi.it/feeds/all.rss.xml" type="application/rss+xml" rel="alternate" title="Andrea Grandi RSS Feed" />

        <!--[if IE]>
            <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
        <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
        <link rel="icon" href="/favicon.ico" type="image/x-icon">
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="https://www.andreagrandi.it/">Andrea Grandi</a></h1>
                <nav><ul>
    
                        <li><a href="https://www.andreagrandi.it/about/">About</a></li>
    
                        <li><a href="https://www.andreagrandi.it/curriculum/">Curriculum</a></li>
    
                        <li><a href="https://www.andreagrandi.it/pgp-key/">PGP Key</a></li>
                </ul>
<form id="search" action="https://www.andreagrandi.it/search.html" onsubmit="return validateForm(this.elements['q'].value);">
                        <input type="text" class="search-query" placeholder="" name="q" id="tipue_search_input">
                    </form>
                </nav>
        </header><!-- /#banner -->

                <section id="content" class="body">
                    <ol id="posts-list" class="hfeed" start="3">
            <li><article class="hentry">
                <header>
                    <h1><a href="https://www.andreagrandi.it/2016/02/07/prototyping-bbc-microbit-projects-with-kitronik-breadboard-kit/" rel="bookmark"
                           title="Permalink to Prototyping BBC micro:bit projects with Kitronik breadboard kit">Prototyping BBC micro:bit projects with Kitronik breadboard kit</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <span>Sun 07 February 2016</span>
	        <span>| in <a href="https://www.andreagrandi.it/category/development.html">Development</a></span>
<span>| tags: <a href="https://www.andreagrandi.it/tag/bbc.html">bbc</a><a href="https://www.andreagrandi.it/tag/embedded.html">embedded</a><a href="https://www.andreagrandi.it/tag/microbit.html">microbit</a><a href="https://www.andreagrandi.it/tag/micropython.html">micropython</a><a href="https://www.andreagrandi.it/tag/python.html">python</a></span>
</footer><!-- /.post-info -->                <p><strong>BBC micro:bit</strong> has a few <a href="http://microbit-micropython.readthedocs.org/en/latest/pin.html">IO
pins</a>
that can be used to interact with external devices. The problem with the
board is that it's not easy to connect the classic jumper wires (those
that we normally connect to a breadboard) to the <strong>micro:bit</strong>, unless
using a <a href="https://en.wikipedia.org/wiki/Crocodile_clip">crocodile clip</a>
and being limited to just 3 pins.</p>
<p><a href="https://www.kitronik.co.uk/5609-prototyping-system-for-the-bbc-microbit.html"><strong>Kitronik breadboard
kit</strong></a>
solves this problem, offering an interface where the micro:bit can be
plugged and all the pins are easily connectable to the breadboard using
normal <a href="https://www.adafruit.com/products/826">male/female jumper wires</a>.</p>
<p>I've built a very simple circuit following an example you can find on
this manual <a href="https://www.kitronik.co.uk/pdf/5603_inventors_kit_for_the_bbc_microbit_tutorial_book.pdf">https://www.kitronik.co.uk/pdf/5603_inventors_kit_for_the_bbc_microbit_tutorial_book.pdf</a></p>
<p><a href="https://www.andreagrandi.it/images/2016/02/microbit_breadboard_example_1.jpg"><img alt="microbit_breadboard_example_1" src="https://www.andreagrandi.it/images/2016/02/microbit_breadboard_example_1.jpg" width="40%"></a></p>
<p>To build the circuit you also need <strong>4 male/female jumper wires</strong> and
<strong>two buttons</strong>. All this circuit does is to connect the buttons to the
<strong>micro:bit</strong> pins that relate to those buttons. Basically pressing
those buttons is the same as pressing <strong>button A</strong> or <strong>button B</strong> on
the <strong>micro:bit</strong> board. Here you can see the schema in detail:</p>
<p><a href="https://www.andreagrandi.it/images/2016/02/Screenshot-2016-02-07-14.30.36.png"><img alt="Screenshot 2016-02-0714.30.36" src="https://www.andreagrandi.it/images/2016/02/Screenshot-2016-02-07-14.30.36.png" width="40%"></a></p>
<h6 id="image-copyright-kitronik" style="text-align: center;">"Image Copyright © Kitronik"</h6>
<p>I've also made a short <strong>video</strong> so that you can see it in action:</p>
<iframe width="420" height="315" src="https://www.youtube.com/embed/0Zfa1sBP7yI" frameborder="0" allowfullscreen="allowfullscreen"></iframe>

<p>And of course the <strong>source code</strong> is available too:</p>
<p>
<script src="https://gist.github.com/andreagrandi/9f66f6806d0ce577bada.js"></script>
</p>
                <a class="readmore" href="https://www.andreagrandi.it/2016/02/07/prototyping-bbc-microbit-projects-with-kitronik-breadboard-kit/">read more</a>
<p><a href="https://www.andreagrandi.it/2016/02/07/prototyping-bbc-microbit-projects-with-kitronik-breadboard-kit/#disqus_thread">comments</a></p>                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="https://www.andreagrandi.it/2016/01/26/using-bbc-microbit-accelerometer-with-python/" rel="bookmark"
                           title="Permalink to Using BBC MicroBit accelerometer with Python">Using BBC MicroBit accelerometer with Python</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <span>Tue 26 January 2016</span>
	        <span>| in <a href="https://www.andreagrandi.it/category/development.html">Development</a></span>
<span>| tags: <a href="https://www.andreagrandi.it/tag/bbc.html">bbc</a><a href="https://www.andreagrandi.it/tag/microbit.html">microbit</a><a href="https://www.andreagrandi.it/tag/python.html">Python</a><a href="https://www.andreagrandi.it/tag/howto.html">howto</a></span>
</footer><!-- /.post-info -->                <p>In these days I'm having a bit of fun with <strong><a href="https://www.microbit.co.uk/">BBC
MicroBit</a></strong> board and I'm learning how to
use the different sensors available. The latest one I wanted to try was
the accelerometer. The board can "sense" if you are moving it in any of
the 3 dimensional axes: X, Y, Z. According to the
<a href="https://microbit-micropython.readthedocs.org/en/latest/accelerometer.html">documentation</a>
there are four methods available that can be used to get these
values: <strong>microbit.accelerometer.get_values()</strong> will return you a tuple with all the 3 values, while 
<strong>microbit.accelerometer.get_x()</strong>, <strong>microbit.accelerometer.get_y()</strong>, <strong>microbit.accelerometer.get_z()</strong>
will give you the single values.</p>
<p>The documentation on the official website doesn't explain much and for
example I didn't even know what was the range of the values I can get
back from these methods (by the way it's <strong>between -1024</strong> and
<strong>1024</strong>), so I decided to play with the code directly and write a very
simple example. The small example I wrote, shows a smile on the board
display if you keep it straight and shows a sad face if you bend it.</p>
<p>This is the result:</p>
<iframe width="420" height="315" src="https://www.youtube.com/embed/LX8fYBsOxA0" frameborder="0" allowfullscreen="allowfullscreen"></iframe>

<p>and this is all the needed code of the application:</p>
<p>
<script src="https://gist.github.com/andreagrandi/f4a7c8ee8597dde3070d.js"></script>
</p>

<p>In the next days I will try to play with more sensors and to publish
other examples.</p>
                <a class="readmore" href="https://www.andreagrandi.it/2016/01/26/using-bbc-microbit-accelerometer-with-python/">read more</a>
<p><a href="https://www.andreagrandi.it/2016/01/26/using-bbc-microbit-accelerometer-with-python/#disqus_thread">comments</a></p>                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="https://www.andreagrandi.it/2015/10/11/reversing-a-list-in-python/" rel="bookmark"
                           title="Permalink to Reversing a List in Python">Reversing a List in Python</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <span>Sun 11 October 2015</span>
	        <span>| in <a href="https://www.andreagrandi.it/category/development.html">Development</a></span>
<span>| tags: <a href="https://www.andreagrandi.it/tag/lists.html">lists</a><a href="https://www.andreagrandi.it/tag/python.html">Python</a><a href="https://www.andreagrandi.it/tag/reversed.html">reversed</a></span>
</footer><!-- /.post-info -->                <p>Sometimes we need to reverse the order of the elements in a Python list.
While there can be many different ways of implementing this task, I
found three in particular that I appreciate for different reasons. Let's
define first a list of integers that we will reverse later.</p>
<div class="highlight"><pre><span></span><span class="n">l</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span>
</pre></div>


<h3>List slicing</h3>
<p>This method can be a bit obscure at first read, but basically it slices
the whole list proceding in the reverse order:</p>
<div class="highlight"><pre><span></span><span class="p">[</span><span class="nb">input</span><span class="p">]:</span> <span class="nb">print</span> <span class="n">l</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="p">[</span><span class="n">output</span><span class="p">]:</span> <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
</pre></div>


<h3>Reversed method</h3>
<p>We use the
<strong><a href="https://docs.python.org/2/library/functions.html#reversed">reversed</a></strong> method
that returns an iterable object and a list comprehension to generate the
new list</p>
<div class="highlight"><pre><span></span><span class="p">[</span><span class="nb">input</span><span class="p">]:</span> <span class="nb">print</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">reversed</span><span class="p">(</span><span class="n">l</span><span class="p">)]</span>
<span class="p">[</span><span class="n">output</span><span class="p">]:</span> <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
</pre></div>


<h3>Swapping values in place</h3>
<p>This last method is more verbose and it basically divides the list in
two parts and swaps the first with sixth, the second with fifth, etc...</p>
<div class="highlight"><pre><span></span><span class="p">[</span><span class="nb">input</span><span class="p">]:</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">l</span><span class="p">)</span> <span class="o">/</span> <span class="mi">2</span><span class="p">):</span>
    <span class="n">l</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">l</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">l</span><span class="p">)</span> <span class="o">-</span><span class="mi">1</span> <span class="o">-</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">l</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">l</span><span class="p">)</span> <span class="o">-</span><span class="mi">1</span> <span class="o">-</span><span class="n">i</span><span class="p">],</span> <span class="n">l</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
<span class="nb">print</span> <span class="n">l</span>

<span class="p">[</span><span class="n">output</span><span class="p">]:</span> <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
</pre></div>
                <a class="readmore" href="https://www.andreagrandi.it/2015/10/11/reversing-a-list-in-python/">read more</a>
<p><a href="https://www.andreagrandi.it/2015/10/11/reversing-a-list-in-python/#disqus_thread">comments</a></p>                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="https://www.andreagrandi.it/2015/08/23/how-to-write-a-custom-django-middleware/" rel="bookmark"
                           title="Permalink to How to write a custom Django Middleware">How to write a custom Django Middleware</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <span>Sun 23 August 2015</span>
	        <span>| in <a href="https://www.andreagrandi.it/category/development.html">Development</a></span>
<span>| tags: <a href="https://www.andreagrandi.it/tag/django.html">Django</a><a href="https://www.andreagrandi.it/tag/howto.html">HowTo</a><a href="https://www.andreagrandi.it/tag/middleware.html">middleware</a><a href="https://www.andreagrandi.it/tag/python.html">Python</a><a href="https://www.andreagrandi.it/tag/tutorial.html">tutorial</a></span>
</footer><!-- /.post-info -->                <p>To understand how a <strong><a href="https://docs.djangoproject.com/en/1.8/topics/http/middleware/">Django
Middleware</a></strong>
works we need to remember that the basic architecture of Django is
composed by a <strong>request</strong> and a <strong>response</strong>. A middleware is something
that stays in the middle. Let's give a look to the next diagram, taken
from official Django documentation:</p>
<p><a href="https://www.andreagrandi.it/images/2015/08/middleware.png"><img alt="middleware" src="https://www.andreagrandi.it/images/2015/08/middleware.png" width="100%"></a></p>
<h3>Important things to know</h3>
<p>There are four important things to know about middlewares:</p>
<ul>
<li>You need to write a class that just inherit from <strong><em>object</em></strong></li>
<li>The <strong>order</strong> where you place your middleware in <strong>settings.py</strong> is
    important: middlewares are processed from top to bottom during a
    request and from bottom to top during a response.</li>
<li>You don't need to implement all the available methods of a
    middleware. For example you can just implement <strong>process_request</strong>
    and <strong>process_template_response</strong></li>
<li>If you implement <strong>process_request</strong> and you decide to return an
    <strong>HttpResponse</strong>, all the other middlewares, views etc... will be
    ignored and only your response will be returned</li>
</ul>
<h3>Writing a middleware</h3>
<p>In my example I wanted to implement a feature that saves the time when a
request is made and the time when a request has been processed, then
calculates the time delta and exposes this value in the context so that
is accessible from our templates. How to implement a similar feature
using a middleware? Here is my example:</p>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>


<span class="k">class</span> <span class="nc">BenchmarkMiddleware</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">process_request</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
        <span class="n">request</span><span class="o">.</span><span class="n">_request_time</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">process_template_response</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="n">response</span><span class="p">):</span>
        <span class="n">response_time</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">_request_time</span> <span class="o">-</span> <span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
        <span class="n">response</span><span class="o">.</span><span class="n">context_data</span><span class="p">[</span><span class="s1">&#39;response_time&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">abs</span><span class="p">(</span><span class="n">response_time</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">response</span>
</pre></div>


<p>Please don't care about how I calculated the time. I'm aware that there
are better ways to do it, but I just wanted to keep it simple and show
how to implement a simple middleware.</p>
<p>If you want to see a <strong>complete example</strong> of a project that includes and
uses this middleware, here you can find the complete source
code: <a href="https://github.com/andreagrandi/benchmark-middleware-example">https://github.com/andreagrandi/benchmark-middleware-example</a></p>
<h3>References</h3>
<ul>
<li><a href="https://docs.djangoproject.com/en/1.8/topics/http/middleware/">https://docs.djangoproject.com/en/1.8/topics/http/middleware/</a></li>
<li><a href="http://agiliq.com/blog/2015/07/understanding-django-middlewares/">http://agiliq.com/blog/2015/07/understanding-django-middlewares/</a></li>
<li><a href="http://code.runnable.com/UrSGolK00ygpAAAQ/creating-a-custom-middleware-for-python-and-django">http://code.runnable.com/UrSGolK00ygpAAAQ/creating-a-custom-middleware-for-python-and-django</a></li>
</ul>
                <a class="readmore" href="https://www.andreagrandi.it/2015/08/23/how-to-write-a-custom-django-middleware/">read more</a>
<p><a href="https://www.andreagrandi.it/2015/08/23/how-to-write-a-custom-django-middleware/#disqus_thread">comments</a></p>                </div><!-- /.entry-content -->
            </article></li>
            </ol><!-- /#posts-list -->
<p class="paginator">
        <a href="https://www.andreagrandi.it/author/andrea-grandi5.html">&laquo;</a>
    Page 6 / 10
        <a href="https://www.andreagrandi.it/author/andrea-grandi7.html">&raquo;</a>
</p>
            </section><!-- /#content -->
        <section id="extras" class="body">
                <div class="social">
                        <h2>social</h2>
                        <ul>
                            <li><a href="https://www.andreagrandi.it/feeds/all.rss.xml" type="application/rss+xml" rel="alternate">rss feed</a></li>

                            <li><a href="https://twitter.com/andreagrandi">twitter</a></li>
                            <li><a href="https://github.com/andreagrandi">github</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <p>
                    Powered by <a href="http://getpelican.com/">Pelican</a> and Python -
                    Source code available on <a href="https://github.com/andreagrandi/andreagrandi.it">GitHub</a>
                    <a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/">
                        <img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc/4.0/80x15.png" />
                    </a>
                </p>
        </footer><!-- /#contentinfo -->

    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-2140684-3']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>
<script type="text/javascript">
    var disqus_shortname = 'andrea-grandi-it';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
</body>
</html>