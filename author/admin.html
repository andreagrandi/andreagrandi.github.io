<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
        <title>Andrea Grandi - admin</title>
        <link rel="stylesheet" href="https://www.andreagrandi.it/theme/css/main.css" />
        <link rel="stylesheet" href="https://www.andreagrandi.it/theme/tipuesearch/css/tipuesearch.css">
        <link href="https://www.andreagrandi.it/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Andrea Grandi Atom Feed" />

        <!--[if IE]>
            <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
        <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
        <link rel="icon" href="/favicon.ico" type="image/x-icon">
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="https://www.andreagrandi.it/">Andrea Grandi </a></h1>
                <nav><ul>
    
                        <li><a href="https://www.andreagrandi.it/about/">About</a></li>
    
                        <li><a href="https://www.andreagrandi.it/curriculum/">Curriculum</a></li>
    
                        <li><a href="https://www.andreagrandi.it/pgp-key/">PGP Key</a></li>
                </ul>
<form id="search" action="https://www.andreagrandi.it/search.html" onsubmit="return validateForm(this.elements['q'].value);">
                        <input type="text" class="search-query" placeholder="" name="q" id="tipue_search_input">
                    </form>
                </nav>
        </header><!-- /#banner -->

            <aside id="featured" class="body">
                <article>
                    <h1 class="entry-title"><a href="https://www.andreagrandi.it/2015/12/18/using-python-pypy-in-a-virtual-environment/">Using Python PyPy in a virtual environment</a></h1>
<footer class="post-info">
        <span>Fri 18 December 2015</span>
	        <span>| in <a href="https://www.andreagrandi.it/category/howto-python.html">HowTo, Python</a></span>
<span>| tags: <a href="https://www.andreagrandi.it/tag/pypy.html">pypy</a><a href="https://www.andreagrandi.it/tag/python.html">Python</a></span>
</footer><!-- /.post-info --><p>Sometimes we need to test if our code also works with
<strong><a href="http://pypy.org/">PyPy</a></strong> implementation of <strong>Python</strong>. Assuming you
have already installed it in your system, first find out where it is
installed:</p>
<p>``` {.lang:zsh .decode:true}
➜  ~  which pypy
/usr/local/bin/pypy</p>
<div class="highlight"><pre><span></span>then you need **mkvirtualenv** to create a virtual environment that will
use this runtime:

``` {.lang:zsh .decode:true}
➜  ~  mkvirtualenv -p /usr/local/bin/pypy pypy-test
Running virtualenv with interpreter /usr/local/bin/pypy
New pypy executable in pypy-test/bin/pypy
Installing setuptools, pip, wheel...done.
(pypy-test)➜  ~  python
Python 2.7.10 (f3ad1e1e1d6215e20d34bb65ab85ff9188c9f559, Sep 01 2015, 06:26:30)
[PyPy 2.6.1 with GCC 4.2.1 Compatible Apple LLVM 6.1.0 (clang-602.0.53)] on darwin
Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.
&gt;&gt;&gt;&gt;
</pre></div>


<p>That's it! You can now use this virtual environment to run your Python
application using PyPy environment.</p><p><a href="https://www.andreagrandi.it/2015/12/18/using-python-pypy-in-a-virtual-environment/#disqus_thread">comments</a></p>                </article>
            </aside><!-- /#featured -->
                <section id="content" class="body">
                    <h1>Other articles</h1>
                    <ol id="posts-list" class="hfeed">

            <li><article class="hentry">
                <header>
                    <h1><a href="https://www.andreagrandi.it/2015/12/10/getting-started-with-bbc-microbit-and-python/" rel="bookmark"
                           title="Permalink to Getting started with BBC MicroBit and Python">Getting started with BBC MicroBit and Python</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <span>Thu 10 December 2015</span>
	        <span>| in <a href="https://www.andreagrandi.it/category/howto-microbit-python.html">HowTo, Microbit, Python</a></span>
<span>| tags: <a href="https://www.andreagrandi.it/tag/microbit.html">microbit</a><a href="https://www.andreagrandi.it/tag/psf.html">psf</a></span>
</footer><!-- /.post-info -->                <p>A few days ago I had the great opportunity to attend an event organised
in collaboration with <strong><a href="https://www.python.org/">Python Software
Foundation</a></strong>, a few <strong>primary school
teachers</strong> and hosted by <strong><a href="http://www.computingatschool.org.uk/">Computing at
School</a></strong>, in <strong>London</strong>. The
meeting was organised by <strong>Yvonne Walker</strong> (from CAS) and <strong>Nicholas
Tollervey</strong> (PSF). The aim of the meeting was for teachers and
developers to meet and discuss the opportunities offered
by <strong><a href="https://micropython.org/">MicroPython</a></strong> on the <strong><a href="https://www.microbit.co.uk/">BBC
micro:bit</a></strong>. During the event a
<strong>BBC</strong> <strong>micro:bit</strong> board was loaned to each person for the purpose of
developing Python scripts, MicroPython itself or educational resources
for the <strong>BBC micro:bit</strong>. Nicholas made it very clear that there is an
<strong>NDA</strong> in place until the device is delivered to the kids and explained
what we could or couldn't do.</p>
<p><a href="https://www.andreagrandi.it/wp-content/uploads/2015/12/computing_at_school_microbit_reduced.jpg"><img alt="computing_at_school_microbit_reduced" src="https://www.andreagrandi.it/wp-content/uploads/2015/12/computing_at_school_microbit_reduced.jpg">{.aligncenter
.wp-image-1094 width="729"
height="546"}</a></p>
<h2>The Board</h2>
<p><a href="https://www.andreagrandi.it/wp-content/uploads/2015/12/bbcfullbleed.jpg"><img alt="bbcfullbleed" src="https://www.andreagrandi.it/wp-content/uploads/2015/12/bbcfullbleed.jpg">{.aligncenter
.wp-image-1082 width="515"
height="334"}</a></p>
<p>The board is a 4 x 5 cm device with an <strong>ARM Cortex-M0</strong> processor,
<strong>accelerometer</strong> and magnetometer sensors, <strong>Bluetooth</strong> and <strong>USB
connectivity</strong>, a <strong>display</strong> consisting of 25 LEDs, <strong>two programmable
buttons</strong>, and can be powered by either USB or an external battery pack
(source: <a href="https://en.wikipedia.org/wiki/Micro_Bit">https://en.wikipedia.org/wiki/Micro_Bit</a> ).</p>
<h2>Flashing the firmware</h2>
<p>Once you get a new board, it probably doesn't have a proper firmware and
application flashed. I suggest you to download the <strong>Python MicroBit
REPL</strong> from this repository: <a href="https://github.com/ntoll/microrepl">https://github.com/ntoll/microrepl</a><br>
All you need to do is to connect the board to your computer, using a
<strong>micro-USB cable</strong>. The device will be mounted as a volume. At this
point, drag &amp; drop the file called
<strong><a href="https://github.com/ntoll/microrepl/blob/master/firmware.hex">firmware.hex</a></strong>
into the mounted volume. The firmware will be flashed and during the
operation you will see a yellow led flashing.</p>
<h2>Using MicroPython micro:bit REPL</h2>
<p>To start writing some Python code on micro:bit you first need to clone
this <a href="https://github.com/ntoll/microrepl">repository</a></p>
<p>``` {.lang:default .decode:true}
git clone git@github.com:ntoll/microrepl.git</p>
<div class="highlight"><pre><span></span>once you have cloned the repository, you need to install the Python
dependencies (I suggest you to do it from inside a **virtualenv**)

``` {.lang:default .decode:true}
pip install -r requirements.txt
</pre></div>


<p>start the MicroPython REPL</p>
<p>``` {.lang:default .decode:true}
python microrepl.py</p>
<div class="highlight"><pre><span></span><span class="s s-Atom">and</span> <span class="s s-Atom">the</span> <span class="nv">Python</span> <span class="s s-Atom">shell</span> <span class="s s-Atom">will</span> <span class="s s-Atom">open</span><span class="p">,</span> <span class="s s-Atom">so</span> <span class="s s-Atom">you</span> <span class="s s-Atom">can</span> <span class="s s-Atom">start</span> <span class="s s-Atom">writing</span> <span class="s s-Atom">commands</span><span class="p">,</span> <span class="s s-Atom">like</span>
<span class="s s-Atom">this</span> <span class="s s-Atom">one</span>

<span class="err">```</span> <span class="p">{.</span><span class="nn">lang</span><span class="p">:</span><span class="s s-Atom">python</span> <span class="p">.</span><span class="nn">decode</span><span class="p">:</span><span class="s s-Atom">true</span><span class="p">}</span>
<span class="p">(</span><span class="s s-Atom">microbit</span><span class="p">)</span><span class="s s-Atom">➜</span>  <span class="s s-Atom">microrepl</span> <span class="nn">git</span><span class="p">:(</span><span class="s s-Atom">master</span><span class="p">)</span> <span class="s s-Atom">python</span> <span class="s s-Atom">microrepl</span><span class="p">.</span><span class="s s-Atom">py</span>
<span class="nv">Quit</span><span class="s s-Atom">:</span> <span class="nv">Ctrl</span><span class="s s-Atom">+</span><span class="p">]</span> <span class="p">|</span> <span class="nv">Stop</span> <span class="nn">program</span><span class="p">:</span> <span class="nv">Ctrl</span><span class="o">+</span><span class="nv">C</span> <span class="p">|</span> <span class="nv">Reset</span><span class="s s-Atom">:</span> <span class="nv">Ctrl</span><span class="o">+</span><span class="nv">D</span>
<span class="nv">Type</span> <span class="s s-Atom">&#39;help()&#39;</span> <span class="p">(</span><span class="s s-Atom">without</span> <span class="s s-Atom">the</span> <span class="s s-Atom">quotes</span><span class="p">)</span> <span class="s s-Atom">then</span> <span class="s s-Atom">press</span> <span class="nv">ENTER</span><span class="p">.</span>

<span class="s s-Atom">&gt;&gt;&gt;</span> <span class="s s-Atom">import</span> <span class="s s-Atom">this</span>
<span class="nv">The</span> <span class="nv">Zen</span> <span class="s s-Atom">of</span> <span class="nv">MicroPython</span><span class="p">,</span> <span class="s s-Atom">by</span> <span class="nv">Nicholas</span> <span class="nv">H</span><span class="p">.</span><span class="nv">Tollervey</span>

<span class="nv">Code</span><span class="p">,</span>
<span class="nv">Hack</span> <span class="s s-Atom">it</span><span class="p">,</span>
<span class="nv">Less</span> <span class="o">is</span> <span class="s s-Atom">more</span><span class="p">,</span>
<span class="nv">Keep</span> <span class="s s-Atom">it</span> <span class="s s-Atom">simple</span><span class="p">,</span>
<span class="nv">Small</span> <span class="o">is</span> <span class="s s-Atom">beautiful</span><span class="p">,</span>

<span class="nv">Be</span> <span class="s s-Atom">brave</span><span class="p">!</span> <span class="nv">Break</span> <span class="s s-Atom">things</span><span class="p">!</span> <span class="nv">Learn</span> <span class="s s-Atom">and</span> <span class="s s-Atom">have</span> <span class="s s-Atom">fun</span><span class="p">!</span>
<span class="nv">Express</span> <span class="s s-Atom">yourself</span> <span class="s s-Atom">with</span> <span class="nv">MicroPython</span><span class="p">.</span>

<span class="nv">Happy</span> <span class="s s-Atom">hacking</span><span class="p">!</span> <span class="p">:-)</span>
<span class="s s-Atom">&gt;&gt;&gt;</span>
</pre></div>


<h2>BBC micro:bit MicroPython Editor</h2>
<p>Typing all the Python commands directly into the shell can be a bit
difficult. You can use a very nice and dedicated editor to write code
and produce the compiled application for the micro:bit. All you need to
do is clone this <a href="https://github.com/ntoll/upyed">repository</a></p>
<p><code>{.lang:default .decode:true}
git clone git@github.com:ntoll/upyed.git</code></p>
<p>Open the file named <strong>editor.html</strong> with your browser and start writing
your code. When your code is done, you can generate the <strong>.hex</strong> file
clicking on <strong>Download</strong> button. To load the compiled application you
just need to drag &amp; drop the .hex file to the mounted device, exactly
like you did the first time to flash it. If you need a reference for all
the methods and libraries available, you can consult the official
documentation
here <a href="http://microbit-micropython.readthedocs.org/en/latest/index.html">http://microbit-micropython.readthedocs.org/en/latest/index.html</a></p>
<h2>References</h2>
<ul>
<li><a href="https://github.com/ntoll/microrepl">https://github.com/ntoll/microrepl</a></li>
<li><a href="https://github.com/ntoll/upyed">https://github.com/ntoll/upyed</a></li>
<li><a href="https://www.microbit.co.uk/">https://www.microbit.co.uk/</a></li>
<li><a href="http://microbit-micropython.readthedocs.org/en/latest/index.html">http://microbit-micropython.readthedocs.org/en/latest/index.html</a></li>
</ul>
                <a class="readmore" href="https://www.andreagrandi.it/2015/12/10/getting-started-with-bbc-microbit-and-python/">read more</a>
<p><a href="https://www.andreagrandi.it/2015/12/10/getting-started-with-bbc-microbit-and-python/#disqus_thread">comments</a></p>                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="https://www.andreagrandi.it/2015/12/09/fix-encfs-under-osx-after-upgrading-to-10-11-2/" rel="bookmark"
                           title="Permalink to Fix encfs under OSX after upgrading to 10.11.2">Fix encfs under OSX after upgrading to 10.11.2</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <span>Wed 09 December 2015</span>
	        <span>| in <a href="https://www.andreagrandi.it/category/howto-osx.html">HowTo, OSX</a></span>
<span>| tags: <a href="https://www.andreagrandi.it/tag/bug.html">bug</a><a href="https://www.andreagrandi.it/tag/encfs.html">encfs</a><a href="https://www.andreagrandi.it/tag/security.html">security</a></span>
</footer><!-- /.post-info -->                <p>After having upgraded <strong>OSX</strong> to <strong>10.11.2</strong> on my MacBook, I noticed
that my <strong>encfs</strong> volume didn't mount after reboot. I tried to run the
script manually and all I got was this error:</p>
<p>``` {.lang:default .decode:true}
dyld: Symbol not found: __ZN5boost7archive17xml_iarchive_implINS0_12xml_iarchiveEE13load_overrideERNS0_15class_name_typeEi
  Referenced from: /usr/local/Cellar/encfs/1.8.1/lib/libencfs.6.dylib
  Expected in: /usr/local/lib/libboost_serialization-mt.dylib
 in /usr/local/Cellar/encfs/1.8.1/lib/libencfs.6.dylib</p>
<div class="highlight"><pre><span></span>I quickly found that was a common problem caused by a new version of
**Boost** being
installed: &lt;https://github.com/Homebrew/homebrew/issues/46254&gt;

To fix it, you just need to **reinstall encfs** using this command

``` {.lang:default .decode:true}
brew reinstall -s encfs
</pre></div>
                <a class="readmore" href="https://www.andreagrandi.it/2015/12/09/fix-encfs-under-osx-after-upgrading-to-10-11-2/">read more</a>
<p><a href="https://www.andreagrandi.it/2015/12/09/fix-encfs-under-osx-after-upgrading-to-10-11-2/#disqus_thread">comments</a></p>                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="https://www.andreagrandi.it/2015/12/06/getting-a-free-ssl-certificate-from-letsencrypt-and-configuring-it-on-nginx-with-automatic-renewal/" rel="bookmark"
                           title="Permalink to Getting a free SSL certificate from Letsencrypt and configuring it on Nginx with automatic renewal">Getting a free SSL certificate from Letsencrypt and configuring it on Nginx with automatic renewal</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <span>Sun 06 December 2015</span>
	        <span>| in <a href="https://www.andreagrandi.it/category/devops-howto-linux.html">DevOps, HowTo, Linux</a></span>
<span>| tags: <a href="https://www.andreagrandi.it/tag/encryption.html">encryption</a><a href="https://www.andreagrandi.it/tag/letsencrypt.html">letsencrypt</a><a href="https://www.andreagrandi.it/tag/security.html">security</a><a href="https://www.andreagrandi.it/tag/ssl.html">ssl</a></span>
</footer><!-- /.post-info -->                <p>Finally <strong><a href="https://letsencrypt.org/">Letsencrypt</a></strong> went to <strong>public
beta</strong> and I really couldn't wait to use it on my VPS (where this blog
is hosted). Until few days ago I was using a <strong>free SSL</strong> certificate
from <a href="https://www.startssl.com/">StartSSL</a>. The service is nice and I'm
grateful to them for this important resource they are providing for
free, but it must be said that their renewal procedure isn't one of the
most user friendly.</p>
<p>For people who don't know the service yet, <strong>Letsencrypt</strong> not only
gives <strong>free SSL certificates</strong>, they also provide a command line tool
that people can use to request a new certificate or to renew an existing
one. This means that you don't have to worry anymore if/when your
certificate expires, you can set a crontab command and have the
certificate <strong>automatically renewed</strong> for you.</p>
<h2>Client installation</h2>
<p>To request a SSL certificate you need to install their command line
utility. Unless it has already been packaged for your distribution, for
the moment it's much easier to get it from git as they explain in their
<a href="https://letsencrypt.readthedocs.org/en/latest/using.html#installation">installation
instructions</a>:</p>
<p>``` {.lang:sh .decode:true}
git clone https://github.com/letsencrypt/letsencrypt
cd letsencrypt
./letsencrypt-auto</p>
<div class="highlight"><pre><span></span><span class="gh">Getting the SSL certificate</span>
<span class="gh">---------------------------</span>

There are a few different options available to request a certificate,
but the easiest one is to use the <span class="gs">**--webroot**</span> option, specifying the
document root of your website so that the client will be able to put
there a verification (temporary) file that will be served to the remote
service and used as verification method. In my case I only needed this
command:

<span class="s">``` {.lang:sh .decode:true}</span>
<span class="s">./letsencrypt-auto certonly --webroot -w /var/www/andreagrandi.it/ -d www.andreagrandi.it -d andreagrandi.it --email myemail@myprovider.com --renew-by-default --agree-tos</span>
</pre></div>


<p>Please note that I had to specify both www.andreagrandi.it and
andreagrandi.it as domains, otherwise it would have been invalid when
requesting just andreagrandi.it resources.</p>
<h2>Configuration files and certificates installation</h2>
<p>The command above will save all the configuration under
<strong>/etc/letsencrypt/</strong> and all the generated certificates under
<strong>/etc/letsencrypt/live/www.andreagrandi.it/*.pem</strong> (all the *.pem
files here are symbolic links to the current certificate). If you are
using <strong>Nginx</strong> the only files you need are <strong>fullchain.pem</strong> and
<strong>privkey.pem</strong> and you can set them in your Nginx configuration using
these two parameters:</p>
<p>``` {.lang:default .decode:true}
ssl_certificate /etc/letsencrypt/live/www.andreagrandi.it/fullchain.pem;
ssl_certificate_key /etc/letsencrypt/live/www.andreagrandi.it/privkey.pem;</p>
<div class="highlight"><pre><span></span>In case you want to have a look at my full Nginx configuration file, as
reference, you can find it
here &lt;https://gist.github.com/andreagrandi/8b194c99cd3e77fdb5a8&gt;

Automatic renewal
-----------------

The last thing to be configured is a crontab rule to call the script
every... 2 months. Why 2 months? Letsencrypt SSL **certificates expire
in 3 months**. Usually SSL certificates are valid at least for 1 year,
but Letsencrypt decided to make it 3 months to incentivate the
automation of the renewal. I set it to 2 months, so if anything goes
wrong I still have plenty of time to do it manually. To edit crontab for
root user execute **crontab -e** and add this line:

``` {.lang:default .decode:true}
0 3 1 */2 * /root/letsencrypt/letsencrypt-auto certonly --webroot -w /var/www/andreagrandi.it/ -d www.andreagrandi.it -d andreagrandi.it --email email@domain.com --renew-by-default --agree-tos &amp;&amp; service nginx reload
</pre></div>


<p>Just a final note. You may have noticed that this website presents an
SSL certificate issued by COMODO. That's because I have
<strong><a href="https://www.cloudflare.com/">CloudFlare</a></strong> in front of my website and
that's how their SSL strict option works (at least for free plans).</p>
                <a class="readmore" href="https://www.andreagrandi.it/2015/12/06/getting-a-free-ssl-certificate-from-letsencrypt-and-configuring-it-on-nginx-with-automatic-renewal/">read more</a>
<p><a href="https://www.andreagrandi.it/2015/12/06/getting-a-free-ssl-certificate-from-letsencrypt-and-configuring-it-on-nginx-with-automatic-renewal/#disqus_thread">comments</a></p>                </div><!-- /.entry-content -->
            </article></li>
            </ol><!-- /#posts-list -->
<p class="paginator">
    Page 1 / 45
        <a href="https://www.andreagrandi.it/author/admin2.html">&raquo;</a>
</p>
            </section><!-- /#content -->
        <section id="extras" class="body">
                <div class="social">
                        <h2>social</h2>
                        <ul>
                            <li><a href="https://www.andreagrandi.it/feeds/all.atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>

                            <li><a href="https://twitter.com/andreagrandi">twitter</a></li>
                            <li><a href="https://github.com/andreagrandi">github</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <p>
                    Powered by <a href="http://getpelican.com/">Pelican</a>. Theme <a href="https://github.com/blueicefield/pelican-blueidea/">blueidea</a>, inspired by the default theme.
                    <a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/">
                        <img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc/4.0/80x15.png" />
                    </a>
                </p>
        </footer><!-- /#contentinfo -->

<script type="text/javascript">
    var disqus_shortname = 'andrea-grandi-it';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
</body>
</html>